<!DOCTYPE html>
<html>

<!-- *********************** HEAD *********************** -->
<head>
<style type="text/css">
.knitr .inline {
  background-color: #f7f7f7;
  border:solid 1px #B0B0B0;
}
.error {
	font-weight: bold;
	color: #FF0000;
}
.warning {
	font-weight: bold;
}
.message {
	font-style: italic;
}
.source, .output, .warning, .error, .message {
	padding: 0 1em;
  border:solid 1px #F7F7F7;
}
.source {
  background-color: #f5f5f5;
}
.rimage .left {
  text-align: left;
}
.rimage .right {
  text-align: right;
}
.rimage .center {
  text-align: center;
}
.hl.num {
  color: #AF0F91;
}
.hl.str {
  color: #317ECC;
}
.hl.com {
  color: #AD95AF;
  font-style: italic;
}
.hl.opt {
  color: #000000;
}
.hl.std {
  color: #585858;
}
.hl.kwa {
  color: #295F94;
  font-weight: bold;
}
.hl.kwb {
  color: #B05A65;
}
.hl.kwc {
  color: #55aa55;
}
.hl.kwd {
  color: #BC5A65;
  font-weight: bold;
}
</style>
<style type="text/css">
.knitr .inline {
  background-color: #f7f7f7;
  border:solid 1px #B0B0B0;
}
.error {
	font-weight: bold;
	color: #FF0000;
}
.warning {
	font-weight: bold;
}
.message {
	font-style: italic;
}
.source, .output, .warning, .error, .message {
	padding: 0 1em;
  border:solid 1px #F7F7F7;
}
.source {
  background-color: #f5f5f5;
}
.rimage .left {
  text-align: left;
}
.rimage .right {
  text-align: right;
}
.rimage .center {
  text-align: center;
}
.hl.num {
  color: #AF0F91;
}
.hl.str {
  color: #317ECC;
}
.hl.com {
  color: #AD95AF;
  font-style: italic;
}
.hl.opt {
  color: #000000;
}
.hl.std {
  color: #585858;
}
.hl.kwa {
  color: #295F94;
  font-weight: bold;
}
.hl.kwb {
  color: #B05A65;
}
.hl.kwc {
  color: #55aa55;
}
.hl.kwd {
  color: #BC5A65;
  font-weight: bold;
}
</style>
<style type="text/css">
.knitr .inline {
  background-color: #f7f7f7;
  border:solid 1px #B0B0B0;
}
.error {
	font-weight: bold;
	color: #FF0000;
}
.warning {
	font-weight: bold;
}
.message {
	font-style: italic;
}
.source, .output, .warning, .error, .message {
	padding: 0 1em;
  border:solid 1px #F7F7F7;
}
.source {
  background-color: #f5f5f5;
}
.rimage .left {
  text-align: left;
}
.rimage .right {
  text-align: right;
}
.rimage .center {
  text-align: center;
}
.hl.num {
  color: #AF0F91;
}
.hl.str {
  color: #317ECC;
}
.hl.com {
  color: #AD95AF;
  font-style: italic;
}
.hl.opt {
  color: #000000;
}
.hl.std {
  color: #585858;
}
.hl.kwa {
  color: #295F94;
  font-weight: bold;
}
.hl.kwb {
  color: #B05A65;
}
.hl.kwc {
  color: #55aa55;
}
.hl.kwd {
  color: #BC5A65;
  font-weight: bold;
}
</style>
<style type="text/css">
.knitr .inline {
  background-color: #f7f7f7;
  border:solid #B0B0B0;
}
.error {
	font-weight: bold;
	color: #FF0000;
}
.warning {
	font-weight: bold;
}
.message {
	font-style: italic;
}
.source, .output, .warning, .error, .message {
	padding: 0 1em;
  border:solid 1px #F7F7F7;
}
.source {
  background-color: #e0ffff; /*#f5f5f5;*/
}

.output {
  background-color: #ffffe6; 
}

.rimage .left {
  text-align: left;
}
.rimage .right {
  text-align: right;
}
.rimage .center {
  text-align: center;
}
.hl.num {
  color: #AF0F91;
}
.hl.str {
  color: #317ECC;
}
.hl.com {
  color: #AD95AF;
  font-style: italic;
}
.hl.opt {
  color: #000000;
}

/* Font of variable names*/
.hl.std {
  color: #585858;
}
.hl.kwa {
  color: #295F94;
  font-weight: bold;
}
.hl.kwb {
  color: #B05A65;
}
.hl.kwc {
  color: #55aa55;
}
.hl.kwd {
  color: #BC5A65;
  font-weight: bold;
}
</style>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="author" content="Prof. Dr. Johannes Binswanger" />
 
<title>Programming for Practical Data Analysis</title>

<!-- ******* LIBRARIES AND PLUGINS ******* -->

<!-- my own css file -->
<link rel="stylesheet" href="css/baseline.css" type="text/css" />

<!-- jquery, nestedToc, slidesjs ... -->


<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

<script src="js/jquery-nestedToc.js">// get nestedToc from http://www.jqueryscript.net/menu/Dynamic-Table-of-Contents-Generator-With-jQuery-nestedToc.html
</script>

<script src="js/jquery.slides.min.js"></script>


</head>

<!-- *********************** END OF HEAD *********************** -->

<body>
<!-- ************************************** -->
<!-- AUTOMATIC INSERTION OF "BACK TO TOP"-->
<script>
// Select all headers to prepend "back to top" link.
// However, exclude the first heading, and the author and date
// Do so by creating a class noBackToTop. It is possible to assign multiple classes to an element.
// See http://stackoverflow.com/questions/3015103/jquery-exclude-elements-with-certain-class-in-selector

//NOTE: It is very important to use .before and not .prepend below!!!
// If you use prepend, the TOC gets screwed as the text shows up there as well!!

$(document).ready(function(){
	// Automatic "back to top" before a new heading, but not when the heading is of class noBackToTop, because 
	// there is immediately a subheading
    $(":header:not('.noBackToTop')").before("<p><a href='#docHeader'; style = 'font-size:1em; color: #A0A0A0'>[Back to top]</a></p>");
	// The back to top at the end of the document
	 $(".scriptText").append("<p><a href='#docHeader' style = 'font-size:1em; color: #A0A0A0'>[Back to top]</a></p>");
	 
	 //Horizontal ruler
	 $("h1:not('.noBackToTop')").before("<div class='markEnd'> </div>");
	 
	 
	
});


</script>



<!-- ************************************** 
     **************************************
	 **************************************
	 
-->








<div id="content">

<!-- *********************** TITLE ITEMS *********************** -->

<div id="docHeader">
    <p class="title">Programming for Practical Data Analysis</p>
    <h4 class="author noBackToTop"><em>Johannes Binswanger, University of St. Gallen</em></h4>
    <h4 class="date noBackToTop"><em>Fall 2016</em></h4>
</div> <!-- end of docHeader div -->



<!-- *********************** TABLE OF CONTENT (TOC) *********************** -->

<!-- This contains a toggle button 
and the table of content -->

<div class="tocContainer">
     
<script>
//jQuery code for toggle button
$( document ).ready( function( ) {
$( ".TOCbutton" ).click(function() {
  $( ".tocToggleContainer" ).toggle();
});
});
</script>

<!-- the button -->
<button class="TOCbutton" style="color: #27738C;font-size: 20px;">Show/hide table of content</button>




</div>

<div class="tocToggleContainer">
<!-- This div is empty, for the toggle -->
</div>

<!-- The following div below has the same class as the previous!! And do not forget to add the particular styling about display. Note that the second div contains another div that contains the toc. This is to keep both the toc and the toggle work. It may not be necessary with the particular toc solution chosen here, but it is necessary for other toc solutions.
-->
    <div class="tocToggleContainer" style="display: none">
    <div class = "toc">
        <script>
        // This script is simply copied from 
        // http://www.jqueryscript.net/menu/Dynamic-Table-of-Contents-Generator-With-jQuery-nestedToc.html
        $( document ).ready( function( ) {
        $('.toc').nestedToc({
    
        container: '.scriptText'
    
      });
      });
      </script>
</div>
</div>






<!-- *********************** MAIN DOCUMENT STARTS HERE *********************** -->



<!-- ************************************************************************* -->



<div class = "scriptText"> <!-- This div contains the main text -->








<!-- *********************** INSTALLATION *********************** -->
<h1 id="installation" class="noBackToTop" style = "padding-top: 20px;">How to install R and RStudio</h1>

<p>Below you find two documents that describe in detail how to install R and RStudio on Mac OS X, and on Windows 10. (In Chrome, you may click on the "fit to page" or the zoom buttons to enlarge the documents; in Firefox, you may have to activate Adobe Acrobat; of course, you can easily download the documents onto your hard drive.)</p>

<!-- A4 is  210 Ã— 297, thus the ratio is 1.414-->


<table style="width:100%">

	<tr>
		<th>Installation for Max OS X</th>
	</tr>

  <tr>
    <th>
		<object width="1200" height="850" data="pdfs/Installation Mac OS X.pdf"></object>
	</th>
	</tr>
<!-- Add empty row-->
	<td bgcolor="#FAFAFA" style="line-height:80px;" colspan=1>&nbsp;</td>
<tr>

		<th>Installation for Windows 10</th>
	<tr><th>
		<object width="1200" height="850" data="pdfs/Installation Windows 10.pdf"></object>
    
		
	</th> 

  </tr>
</table>




<h1 id="lecture1" class="noBackToTop">Lecture 1</h1>

<h2 id="lecture1_slides" class="noBackToTop">Slides for Lecture 1</h2>

<p> Below you can find the slides in pdf format for this lecture (which, of course, you can download if you want to make annotations). </p>



<table style="width:100%">

	<tr>
		<th>Slides for Lecture 1</th>
	</tr>

  <tr>
    <th>
		<object width="1200" height="880" data="pdfs/Practical programming - Lecture 1.pdf"></object>
	</th>
	</tr>


</table>


<h2 id="lecture1_codelive">&ldquo;Live&rdquo; code from Lecture 1</h2>

<p>And here you find the R code that we typed during the first lecture. You will also see the respective output from R (on yellow background). You have seen, for a very first time, the following concepts or objects:
<ul>
<li> Variables and the assignment of values to variables
<li> Variable types (numeric, character, logical)
<li> vectors
<li> the commands <code>seq()</code>, <code>rep()</code>, <code>cat()</code>, <code>paste()</code>, <code>paste0()</code>
<li> How to convert numeric values to character values
<li> How to make a very basic plot
</ul>

</p>

<p>Get &ldquo;live&rdquo; code as <a href="pdfs/Lec1_live.pdf" target = "_blank">pdf</a>.</p>

<div class="chunk" id="unnamed-chunk-1"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl std">num</span> <span class="hl kwb">=</span> <span class="hl num">5</span>
<span class="hl std">num</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] 5
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl std">alph</span> <span class="hl kwb">=</span> <span class="hl str">&quot;a&quot;</span>
<span class="hl std">alph</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] &quot;a&quot;
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">class</span><span class="hl std">(num)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] &quot;numeric&quot;
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">class</span><span class="hl std">(alph)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] &quot;character&quot;
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com"># Variables (like num and alph) can have</span>
<span class="hl com"># several &quot;types&quot;, e.g. numeric or character</span>
<span class="hl com"># This can be checked by using the class command.</span>

<span class="hl std">numchar</span> <span class="hl kwb">=</span> <span class="hl str">&quot;5&quot;</span>
<span class="hl kwd">class</span><span class="hl std">(numchar)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] &quot;character&quot;
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com"># Some algebra</span>
<span class="hl com">###############</span>

<span class="hl num">5</span><span class="hl opt">^</span><span class="hl num">2</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] 25
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl std">x</span> <span class="hl kwb">=</span> <span class="hl kwd">exp</span><span class="hl std">(</span><span class="hl num">1</span><span class="hl std">)</span>
<span class="hl std">x</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] 2.718282
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl std">y</span> <span class="hl kwb">=</span> <span class="hl kwd">log</span><span class="hl std">(x)</span>
<span class="hl std">y</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] 1
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com"># Equality vs. equality, and Boolean variables</span>
<span class="hl com">##############################################</span>

<span class="hl std">i</span> <span class="hl kwb">=</span> <span class="hl num">1</span>
<span class="hl std">j</span> <span class="hl kwb">=</span> <span class="hl std">i</span>
<span class="hl std">i</span> <span class="hl kwb">=</span> <span class="hl num">2</span>
<span class="hl std">j</span><span class="hl kwb">=</span><span class="hl std">i</span>
<span class="hl std">j</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] 2
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl std">i</span> <span class="hl kwb">=</span> <span class="hl num">1</span>
<span class="hl std">i</span> <span class="hl kwb">=</span> <span class="hl std">i</span> <span class="hl opt">+</span> <span class="hl num">1</span>

<span class="hl std">i</span> <span class="hl kwb">&lt;-</span><span class="hl num">1</span>
<span class="hl std">i</span> <span class="hl kwb">&lt;-</span><span class="hl std">i</span><span class="hl opt">+</span><span class="hl num">1</span>
<span class="hl std">i</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] 2
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com"># = means assignment, not mathematical equality</span>

<span class="hl std">i</span><span class="hl opt">==</span><span class="hl std">j</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] TRUE
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl std">z</span> <span class="hl kwb">=</span> <span class="hl std">i</span><span class="hl opt">==</span><span class="hl std">j</span>
<span class="hl std">z</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] TRUE
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">class</span><span class="hl std">(z)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] &quot;logical&quot;
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com"># Another data type is &quot;logical&quot;, often also </span>
<span class="hl com"># called Boolean</span>

<span class="hl com"># VECTORS</span>
<span class="hl com">##########</span>

<span class="hl std">a</span> <span class="hl kwb">=</span> <span class="hl kwd">c</span><span class="hl std">(</span><span class="hl num">2</span><span class="hl std">,</span><span class="hl num">5</span><span class="hl std">,</span><span class="hl num">90</span><span class="hl std">)</span>
<span class="hl std">a</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1]  2  5 90
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl std">b</span> <span class="hl kwb">=</span> <span class="hl kwd">c</span><span class="hl std">(</span><span class="hl str">&quot;w&quot;</span><span class="hl std">,</span> <span class="hl str">&quot;o&quot;</span><span class="hl std">,</span> <span class="hl str">&quot;w&quot;</span><span class="hl std">)</span>
<span class="hl std">b</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] &quot;w&quot; &quot;o&quot; &quot;w&quot;
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">cat</span><span class="hl std">(b)</span>
</pre></div>
<div class="output"><pre class="knitr r">## w o w
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">cat</span><span class="hl std">(b,</span> <span class="hl kwc">sep</span><span class="hl std">=</span><span class="hl str">&quot;&quot;</span><span class="hl std">)</span>
</pre></div>
<div class="output"><pre class="knitr r">## wow
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com"># delete a variable</span>
<span class="hl kwd">rm</span><span class="hl std">(a, b)</span>

<span class="hl com"># Delete everything in working space</span>

<span class="hl kwd">rm</span><span class="hl std">(</span><span class="hl kwc">list</span> <span class="hl std">=</span> <span class="hl kwd">ls</span><span class="hl std">())</span>

<span class="hl com">###############################</span>
<span class="hl std">x</span> <span class="hl kwb">=</span> <span class="hl num">0</span><span class="hl opt">:</span><span class="hl num">10</span>
<span class="hl std">x</span>
</pre></div>
<div class="output"><pre class="knitr r">##  [1]  0  1  2  3  4  5  6  7  8  9 10
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl std">x</span> <span class="hl kwb">=</span> <span class="hl kwd">seq</span><span class="hl std">(</span><span class="hl kwc">from</span> <span class="hl std">=</span> <span class="hl num">0</span><span class="hl std">,</span>
        <span class="hl kwc">to</span> <span class="hl std">=</span> <span class="hl num">10</span><span class="hl std">,</span>
        <span class="hl kwc">by</span> <span class="hl std">=</span> <span class="hl num">0.5</span><span class="hl std">)</span>
<span class="hl std">x</span>
</pre></div>
<div class="output"><pre class="knitr r">##  [1]  0.0  0.5  1.0  1.5  2.0  2.5  3.0  3.5  4.0  4.5  5.0  5.5  6.0  6.5
## [15]  7.0  7.5  8.0  8.5  9.0  9.5 10.0
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl std">y</span> <span class="hl kwb">=</span> <span class="hl std">x</span><span class="hl opt">^</span><span class="hl num">2</span>
<span class="hl std">y</span>
</pre></div>
<div class="output"><pre class="knitr r">##  [1]   0.00   0.25   1.00   2.25   4.00   6.25   9.00  12.25  16.00  20.25
## [11]  25.00  30.25  36.00  42.25  49.00  56.25  64.00  72.25  81.00  90.25
## [21] 100.00
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">plot</span><span class="hl std">(x,y)</span>
</pre></div>
</div><div class="rimage default"><img src="figure/unnamed-chunk-1-1.png" title="plot of chunk unnamed-chunk-1" alt="plot of chunk unnamed-chunk-1" class="plot" /></div><div class="rcode">
<div class="source"><pre class="knitr r"><span class="hl kwd">plot</span><span class="hl std">(x,y,</span> <span class="hl kwc">type</span><span class="hl std">=</span><span class="hl str">&quot;l&quot;</span><span class="hl std">)</span>
</pre></div>
</div><div class="rimage default"><img src="figure/unnamed-chunk-1-2.png" title="plot of chunk unnamed-chunk-1" alt="plot of chunk unnamed-chunk-1" class="plot" /></div><div class="rcode">
<div class="source"><pre class="knitr r"><span class="hl kwd">rep</span><span class="hl std">(</span><span class="hl str">&quot;Semester&quot;</span><span class="hl std">,</span><span class="hl num">6</span><span class="hl std">)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] &quot;Semester&quot; &quot;Semester&quot; &quot;Semester&quot; &quot;Semester&quot; &quot;Semester&quot; &quot;Semester&quot;
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl std">n</span> <span class="hl kwb">=</span> <span class="hl kwd">as.character</span><span class="hl std">(</span><span class="hl num">1</span><span class="hl opt">:</span><span class="hl num">6</span><span class="hl std">)</span>
<span class="hl std">n</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot; &quot;5&quot; &quot;6&quot;
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">paste</span><span class="hl std">(n,</span> <span class="hl kwd">rep</span><span class="hl std">(</span><span class="hl str">&quot;. Semester&quot;</span><span class="hl std">,</span><span class="hl num">6</span><span class="hl std">))</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] &quot;1 . Semester&quot; &quot;2 . Semester&quot; &quot;3 . Semester&quot; &quot;4 . Semester&quot;
## [5] &quot;5 . Semester&quot; &quot;6 . Semester&quot;
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">paste0</span><span class="hl std">(n,</span> <span class="hl kwd">rep</span><span class="hl std">(</span><span class="hl str">&quot;. Semester&quot;</span><span class="hl std">,</span><span class="hl num">6</span><span class="hl std">))</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] &quot;1. Semester&quot; &quot;2. Semester&quot; &quot;3. Semester&quot; &quot;4. Semester&quot; &quot;5. Semester&quot;
## [6] &quot;6. Semester&quot;
</pre></div>
</div></div>




<h2 id="lecture1_homesolution">Solution of Home Assignment for Lecture 1</h2>

<p>Here you find the solution for the home assignment of Lecture 1.</p>

<div class="chunk" id="unnamed-chunk-2"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl com"># Homework Lec1</span>

<span class="hl com"># Plots of exponential function</span>
<span class="hl com">##############################</span>

<span class="hl com"># With a coarse grid</span>
<span class="hl std">x</span> <span class="hl kwb">=</span> <span class="hl kwd">seq</span><span class="hl std">(</span><span class="hl num">0</span><span class="hl std">,</span><span class="hl num">50</span><span class="hl std">,</span> <span class="hl num">5</span><span class="hl std">)</span>
<span class="hl std">y</span> <span class="hl kwb">=</span> <span class="hl kwd">exp</span><span class="hl std">(x)</span>
<span class="hl kwd">plot</span><span class="hl std">(x, y,</span> <span class="hl kwc">type</span> <span class="hl std">=</span> <span class="hl str">&quot;l&quot;</span><span class="hl std">)</span>
</pre></div>
</div><div class="rimage default"><img src="figure/unnamed-chunk-2-1.png" title="plot of chunk unnamed-chunk-2" alt="plot of chunk unnamed-chunk-2" class="plot" /></div><div class="rcode">
<div class="source"><pre class="knitr r"><span class="hl com"># With a fine grid</span>
<span class="hl std">x</span> <span class="hl kwb">=</span> <span class="hl kwd">seq</span><span class="hl std">(</span><span class="hl num">0</span><span class="hl std">,</span><span class="hl num">50</span><span class="hl std">,</span> <span class="hl num">0.1</span><span class="hl std">)</span>
<span class="hl std">y</span> <span class="hl kwb">=</span> <span class="hl kwd">exp</span><span class="hl std">(x)</span>
<span class="hl kwd">plot</span><span class="hl std">(x, y,</span> <span class="hl kwc">type</span> <span class="hl std">=</span> <span class="hl str">&quot;l&quot;</span><span class="hl std">)</span>
</pre></div>
</div><div class="rimage default"><img src="figure/unnamed-chunk-2-2.png" title="plot of chunk unnamed-chunk-2" alt="plot of chunk unnamed-chunk-2" class="plot" /></div><div class="rcode">
<div class="source"><pre class="knitr r"><span class="hl com"># And with a red curve</span>
<span class="hl kwd">plot</span><span class="hl std">(x, y,</span> <span class="hl kwc">type</span> <span class="hl std">=</span> <span class="hl str">&quot;l&quot;</span><span class="hl std">,</span> <span class="hl kwc">col</span> <span class="hl std">=</span> <span class="hl str">&quot;red&quot;</span><span class="hl std">)</span>
</pre></div>
</div><div class="rimage default"><img src="figure/unnamed-chunk-2-3.png" title="plot of chunk unnamed-chunk-2" alt="plot of chunk unnamed-chunk-2" class="plot" /></div><div class="rcode">
<div class="source"><pre class="knitr r"><span class="hl com"># Generating a vector with date information</span>

<span class="hl com"># There are many possible solutions, here is one:</span>

<span class="hl std">monthN</span> <span class="hl kwb">=</span> <span class="hl kwd">c</span><span class="hl std">(</span><span class="hl num">1</span><span class="hl opt">:</span><span class="hl num">12</span><span class="hl std">,</span> <span class="hl num">1</span><span class="hl opt">:</span><span class="hl num">12</span><span class="hl std">)</span>

<span class="hl std">years</span> <span class="hl kwb">=</span> <span class="hl kwd">c</span><span class="hl std">(</span><span class="hl kwd">rep</span><span class="hl std">(</span><span class="hl str">&quot;2015&quot;</span><span class="hl std">,</span> <span class="hl num">12</span><span class="hl std">),</span> <span class="hl kwd">rep</span><span class="hl std">(</span><span class="hl str">&quot;2016&quot;</span><span class="hl std">,</span> <span class="hl num">12</span><span class="hl std">))</span>

<span class="hl std">text</span> <span class="hl kwb">=</span> <span class="hl kwd">rep</span><span class="hl std">(</span><span class="hl str">&quot;. Monat &quot;</span><span class="hl std">,</span> <span class="hl num">24</span><span class="hl std">)</span>

<span class="hl kwd">paste0</span><span class="hl std">(monthN, text, years)</span>
</pre></div>
<div class="output"><pre class="knitr r">##  [1] &quot;1. Monat 2015&quot;  &quot;2. Monat 2015&quot;  &quot;3. Monat 2015&quot;  &quot;4. Monat 2015&quot; 
##  [5] &quot;5. Monat 2015&quot;  &quot;6. Monat 2015&quot;  &quot;7. Monat 2015&quot;  &quot;8. Monat 2015&quot; 
##  [9] &quot;9. Monat 2015&quot;  &quot;10. Monat 2015&quot; &quot;11. Monat 2015&quot; &quot;12. Monat 2015&quot;
## [13] &quot;1. Monat 2016&quot;  &quot;2. Monat 2016&quot;  &quot;3. Monat 2016&quot;  &quot;4. Monat 2016&quot; 
## [17] &quot;5. Monat 2016&quot;  &quot;6. Monat 2016&quot;  &quot;7. Monat 2016&quot;  &quot;8. Monat 2016&quot; 
## [21] &quot;9. Monat 2016&quot;  &quot;10. Monat 2016&quot; &quot;11. Monat 2016&quot; &quot;12. Monat 2016&quot;
</pre></div>
</div></div>



<h1 id="lecture2">Lecture 2</h1>


<h2 id="lecture2_slides" class="noBackToTop">Slides for Lecture 2</h2>


<table style="width:100%">

	<tr>
		<th>Slides for Lecture 2</th>
	</tr>

  <tr>
    <th>
		<object width="1200" height="880" data="pdfs/Practical programming - Lecture 2.pdf"></object>
	</th>
	</tr>


</table>

<h2 id="lecture2_codelive">&ldquo;Live&rdquo; Code from Lecture 2</h2>

<p>Get &ldquo;live&rdquo; code as <a href="pdfs/Lec2_live.pdf" target = "_blank">pdf</a>.</p>

<div class="chunk" id="unnamed-chunk-3"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl com"># Let's assemble a data.frame (=spreadsheet),</span>
<span class="hl com"># This can be very big.</span>
<span class="hl com"># This is the format we will read data into.</span>

<span class="hl std">n</span> <span class="hl kwb">=</span> <span class="hl kwd">as.character</span><span class="hl std">(</span><span class="hl num">1</span><span class="hl opt">:</span><span class="hl num">6</span><span class="hl std">)</span>
<span class="hl std">semester</span> <span class="hl kwb">=</span> <span class="hl kwd">paste0</span><span class="hl std">(n,</span> <span class="hl str">&quot;. Semester&quot;</span><span class="hl std">)</span>
<span class="hl std">semester</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] &quot;1. Semester&quot; &quot;2. Semester&quot; &quot;3. Semester&quot; &quot;4. Semester&quot; &quot;5. Semester&quot;
## [6] &quot;6. Semester&quot;
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com"># Number of courses</span>
<span class="hl std">l</span> <span class="hl kwb">=</span> <span class="hl kwd">length</span><span class="hl std">(semester)</span>
<span class="hl std">l</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] 6
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com">#generate random vector with zeros and ones</span>

<span class="hl kwd">set.seed</span><span class="hl std">(</span><span class="hl num">1</span><span class="hl std">)</span> <span class="hl com"># Make sure we all draw the same numbers</span>
<span class="hl std">randZeroOne</span> <span class="hl kwb">=</span> <span class="hl kwd">rbinom</span><span class="hl std">(l,</span> <span class="hl num">1</span><span class="hl std">,</span> <span class="hl num">0.5</span><span class="hl std">)</span>

<span class="hl std">nCourses</span> <span class="hl kwb">=</span> <span class="hl num">6</span><span class="hl opt">-</span><span class="hl std">randZeroOne</span>
<span class="hl std">nCourses</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] 6 6 5 5 6 5
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com"># Level of difficulty</span>
<span class="hl std">diffLevels</span> <span class="hl kwb">=</span> <span class="hl kwd">c</span><span class="hl std">(</span><span class="hl str">&quot;hard&quot;</span><span class="hl std">,</span> <span class="hl str">&quot;medium&quot;</span><span class="hl std">,</span> <span class="hl str">&quot;easy&quot;</span><span class="hl std">)</span>

<span class="hl kwd">set.seed</span><span class="hl std">(</span><span class="hl num">2837482</span><span class="hl std">)</span>
<span class="hl std">difficulty</span> <span class="hl kwb">=</span> <span class="hl kwd">sample</span><span class="hl std">(diffLevels, l,</span> <span class="hl kwc">replace</span> <span class="hl std">= T)</span>
<span class="hl std">difficulty</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] &quot;medium&quot; &quot;medium&quot; &quot;easy&quot;   &quot;medium&quot; &quot;easy&quot;   &quot;hard&quot;
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">class</span><span class="hl std">(difficulty)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] &quot;character&quot;
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl std">difficultyFac</span> <span class="hl kwb">=</span> <span class="hl kwd">as.factor</span><span class="hl std">(difficulty)</span>
<span class="hl std">difficultyFac</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] medium medium easy   medium easy   hard  
## Levels: easy hard medium
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com">#plot(difficulty) # This does not yield any sensible results</span>
<span class="hl kwd">plot</span><span class="hl std">(difficultyFac)</span>
</pre></div>
</div><div class="rimage default"><img src="figure/unnamed-chunk-3-1.png" title="plot of chunk unnamed-chunk-3" alt="plot of chunk unnamed-chunk-3" class="plot" /></div><div class="rcode">
<div class="source"><pre class="knitr r"><span class="hl com">#number of students</span>
<span class="hl std">nStud</span> <span class="hl kwb">=</span> <span class="hl kwd">rpois</span><span class="hl std">(l,</span> <span class="hl num">30</span><span class="hl std">)</span>
<span class="hl std">nStud</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] 24 29 32 27 29 24
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl std">uni</span> <span class="hl kwb">=</span> <span class="hl kwd">rep</span><span class="hl std">(</span><span class="hl str">&quot;HSG&quot;</span><span class="hl std">, l)</span>

<span class="hl std">bachelorProgram</span> <span class="hl kwb">=</span> <span class="hl kwd">data.frame</span><span class="hl std">(</span>
  <span class="hl std">semester, nCourses, difficultyFac,</span>
  <span class="hl std">nStud, uni</span>
<span class="hl std">)</span>

<span class="hl com">############################################</span>

<span class="hl com"># Lists are another data type</span>
<span class="hl std">L0</span> <span class="hl kwb">=</span> <span class="hl kwd">list</span><span class="hl std">(</span><span class="hl kwc">bachelorProgram</span> <span class="hl std">= bachelorProgram,</span>
          <span class="hl kwc">difficulty</span> <span class="hl std">= difficultyFac)</span>

<span class="hl std">L0</span>
</pre></div>
<div class="output"><pre class="knitr r">## $bachelorProgram
##      semester nCourses difficultyFac nStud uni
## 1 1. Semester        6        medium    24 HSG
## 2 2. Semester        6        medium    29 HSG
## 3 3. Semester        5          easy    32 HSG
## 4 4. Semester        5        medium    27 HSG
## 5 5. Semester        6          easy    29 HSG
## 6 6. Semester        5          hard    24 HSG
## 
## $difficulty
## [1] medium medium easy   medium easy   hard  
## Levels: easy hard medium
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl std">L1</span> <span class="hl kwb">=</span> <span class="hl kwd">list</span><span class="hl std">(L0, bachelorProgram,</span> <span class="hl str">&quot;chaos&quot;</span><span class="hl std">)</span>
<span class="hl std">L1</span>
</pre></div>
<div class="output"><pre class="knitr r">## [[1]]
## [[1]]$bachelorProgram
##      semester nCourses difficultyFac nStud uni
## 1 1. Semester        6        medium    24 HSG
## 2 2. Semester        6        medium    29 HSG
## 3 3. Semester        5          easy    32 HSG
## 4 4. Semester        5        medium    27 HSG
## 5 5. Semester        6          easy    29 HSG
## 6 6. Semester        5          hard    24 HSG
## 
## [[1]]$difficulty
## [1] medium medium easy   medium easy   hard  
## Levels: easy hard medium
## 
## 
## [[2]]
##      semester nCourses difficultyFac nStud uni
## 1 1. Semester        6        medium    24 HSG
## 2 2. Semester        6        medium    29 HSG
## 3 3. Semester        5          easy    32 HSG
## 4 4. Semester        5        medium    27 HSG
## 5 5. Semester        6          easy    29 HSG
## 6 6. Semester        5          hard    24 HSG
## 
## [[3]]
## [1] &quot;chaos&quot;
</pre></div>
</div></div>

<h2 id="lecture2_homesolution">Solution of Home Assignment for Lecture 2</h2>


<div class="chunk" id="unnamed-chunk-4"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl com"># Question 1</span>

<span class="hl std">id</span> <span class="hl kwb">=</span> <span class="hl num">1</span><span class="hl opt">:</span><span class="hl num">1000</span>

<span class="hl com"># Question 2</span>

<span class="hl kwd">set.seed</span><span class="hl std">(</span><span class="hl num">8763</span><span class="hl std">)</span>
<span class="hl std">gender</span> <span class="hl kwb">=</span> <span class="hl kwd">rbinom</span><span class="hl std">(</span><span class="hl num">1000</span><span class="hl std">,</span><span class="hl num">1</span><span class="hl std">,</span> <span class="hl num">0.5</span><span class="hl std">)</span>
<span class="hl std">gender</span>
</pre></div>
<div class="output"><pre class="knitr r">##    [1] 0 0 1 0 1 0 0 1 0 0 0 1 0 0 0 0 1 1 1 1 1 1 0 1 1 1 1 0 0 1 1 1 1 0
##   [35] 0 1 1 0 1 0 1 0 0 1 0 0 1 1 1 1 1 0 0 0 0 1 1 0 0 0 1 1 0 1 0 0 0 1
##   [69] 1 0 1 1 0 1 0 1 1 1 0 0 1 0 0 0 0 0 1 0 0 0 0 1 1 1 1 1 1 1 1 1 1 0
##  [103] 0 1 0 1 1 1 1 0 0 0 1 0 0 1 0 0 1 1 0 1 0 0 0 1 1 1 0 1 1 1 0 0 1 0
##  [137] 0 1 1 0 0 1 1 0 1 0 0 0 0 0 0 0 1 1 1 0 1 0 0 0 0 1 1 1 0 0 1 0 0 1
##  [171] 0 0 0 0 0 1 1 1 0 0 1 1 0 1 1 0 0 1 0 1 1 0 0 0 1 1 0 1 1 0 1 0 1 0
##  [205] 1 1 0 0 0 1 0 0 0 1 0 1 0 1 1 0 0 1 0 1 0 1 1 1 1 0 0 0 0 1 1 1 0 0
##  [239] 0 0 1 1 1 0 1 1 0 0 1 0 0 1 0 0 1 1 0 0 0 1 0 0 0 0 0 0 1 1 0 0 1 0
##  [273] 1 1 0 1 0 1 1 1 0 1 1 1 0 1 1 1 1 1 1 1 1 1 1 0 1 1 1 1 0 0 0 1 1 1
##  [307] 0 0 1 0 1 1 0 1 0 0 1 0 1 0 0 0 1 0 0 1 0 1 0 0 1 1 0 0 0 0 0 1 1 1
##  [341] 0 1 0 1 0 1 1 0 1 1 1 0 1 0 0 0 0 0 0 1 0 0 1 1 1 1 0 1 1 0 1 1 0 1
##  [375] 1 1 1 1 1 1 1 0 1 0 0 1 0 0 0 1 0 1 1 1 1 1 1 0 1 0 0 0 1 1 0 1 1 1
##  [409] 1 1 1 1 1 0 0 0 1 0 0 0 1 0 0 1 1 1 0 0 0 1 1 1 1 1 1 1 1 0 0 0 0 1
##  [443] 0 1 0 0 1 1 1 1 0 1 1 0 1 1 0 1 0 0 0 0 1 1 1 1 1 0 1 0 1 1 0 1 1 0
##  [477] 1 1 0 0 1 1 0 1 1 1 1 1 0 0 1 0 0 0 0 0 0 0 1 0 1 0 1 1 1 0 0 0 1 1
##  [511] 0 0 1 0 1 0 1 0 1 0 1 0 0 1 0 1 1 0 0 0 0 1 1 1 1 1 0 0 1 1 0 0 0 1
##  [545] 1 0 0 1 0 1 0 0 1 0 1 1 0 0 0 1 0 1 1 0 1 0 1 0 1 1 1 0 0 0 0 1 1 1
##  [579] 0 0 0 0 0 0 1 0 1 0 1 1 0 0 0 1 1 0 1 0 0 1 0 0 1 0 0 1 1 0 1 1 0 0
##  [613] 1 1 1 0 0 1 1 0 0 0 1 1 1 0 0 0 0 0 1 1 1 1 0 1 1 1 1 1 1 0 0 1 0 0
##  [647] 0 1 1 1 1 0 0 1 1 1 0 1 1 1 0 0 0 0 0 1 1 0 1 1 1 1 0 0 0 0 1 1 0 0
##  [681] 1 0 1 0 0 0 0 0 1 0 1 0 0 0 0 1 1 0 0 0 0 0 1 0 0 1 0 0 1 0 0 0 1 1
##  [715] 0 0 0 0 0 0 0 0 0 1 1 0 0 0 1 0 0 1 1 1 1 1 0 1 1 0 1 1 1 0 1 0 1 0
##  [749] 1 1 0 1 1 0 0 0 1 0 1 1 1 0 0 0 0 1 0 0 1 1 0 0 1 0 1 0 1 0 0 1 1 0
##  [783] 0 0 1 1 0 1 0 0 0 1 0 1 1 1 1 0 1 0 0 0 1 1 1 1 0 1 0 1 0 1 0 0 0 0
##  [817] 0 1 1 0 1 1 0 0 1 1 1 0 1 1 0 0 0 1 1 1 1 0 0 0 0 1 0 1 1 0 1 1 1 1
##  [851] 0 1 0 1 1 0 1 0 1 0 1 0 1 0 0 1 1 1 1 1 1 1 1 0 1 0 0 1 0 1 0 1 1 0
##  [885] 0 0 1 0 1 1 0 1 0 0 0 0 0 1 0 0 1 0 1 0 0 0 1 1 1 1 0 0 0 0 1 1 1 1
##  [919] 1 0 0 0 0 0 0 0 1 1 1 0 0 0 1 1 1 0 1 0 1 0 1 1 0 0 0 0 0 1 0 1 0 0
##  [953] 1 1 1 0 0 1 1 1 1 1 0 1 1 1 1 1 1 1 1 0 1 1 0 1 0 1 1 0 0 0 0 1 1 0
##  [987] 1 0 1 0 0 0 0 1 0 0 1 0 1 1
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com"># Question 3</span>

<span class="hl kwd">set.seed</span><span class="hl std">(</span><span class="hl num">8763</span><span class="hl std">)</span>
<span class="hl std">politViews</span> <span class="hl kwb">=</span> <span class="hl kwd">rnorm</span><span class="hl std">(</span><span class="hl num">1000</span><span class="hl std">,</span> <span class="hl num">5</span><span class="hl std">,</span> <span class="hl num">1</span><span class="hl std">)</span>

<span class="hl kwd">hist</span><span class="hl std">(politViews)</span>
</pre></div>
</div><div class="rimage default"><img src="figure/unnamed-chunk-4-1.png" title="plot of chunk unnamed-chunk-4" alt="plot of chunk unnamed-chunk-4" class="plot" /></div><div class="rcode">
<div class="source"><pre class="knitr r"><span class="hl kwd">mean</span><span class="hl std">(politViews)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] 5.026438
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com"># Question 4</span>

<span class="hl std">characTypes</span> <span class="hl kwb">=</span> <span class="hl kwd">c</span><span class="hl std">(</span><span class="hl str">&quot;introvert&quot;</span><span class="hl std">,</span> <span class="hl str">&quot;extrovert&quot;</span><span class="hl std">,</span> <span class="hl str">&quot;nerdy&quot;</span><span class="hl std">)</span>

<span class="hl std">charac</span> <span class="hl kwb">=</span> <span class="hl kwd">sample</span><span class="hl std">(characTypes,</span> <span class="hl num">1000</span><span class="hl std">,</span> <span class="hl kwc">replace</span> <span class="hl std">= T)</span>

<span class="hl com"># Question 5</span>

<span class="hl std">data</span> <span class="hl kwb">=</span> <span class="hl kwd">data.frame</span><span class="hl std">(id, gender, politViews, charac)</span>
</pre></div>
</div></div>




<!-- ####################################################### -->



<h1 id="lecture3">Lecture 3</h1>



<h2 id="lecture3_codelive" class="noBackToTop">&ldquo;Live&rdquo; Code from Lecture 3</h2>


<p>Please note that the last bits in the &ldquo;live&rdquo; code (under &ldquo;Optional Arguments&rdquo;) is incomplete. We will finish this during Lecture 4. If you prefer the &ldquo;live&rdquo; code as pdf, you can get it <a href="pdfs/Lec3_live.pdf" target = "_blank">here</a>.</p>

<div class="chunk" id="unnamed-chunk-5"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl com">#############</span>
<span class="hl com"># Functions #</span>
<span class="hl com">#############</span>

<span class="hl std">sayHello</span> <span class="hl kwb">=</span> <span class="hl kwa">function</span><span class="hl std">(</span><span class="hl kwc">name</span><span class="hl std">){</span>
  <span class="hl kwd">paste0</span><span class="hl std">(</span><span class="hl str">&quot;Hello &quot;</span><span class="hl std">, name,</span>
         <span class="hl str">&quot;, how are you doing today?&quot;</span><span class="hl std">)</span>
<span class="hl std">}</span>

<span class="hl kwd">sayHello</span><span class="hl std">(</span><span class="hl str">&quot;Sabrina&quot;</span><span class="hl std">)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] &quot;Hello Sabrina, how are you doing today?&quot;
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">sayHello</span><span class="hl std">(</span><span class="hl str">&quot;Christian&quot;</span><span class="hl std">)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] &quot;Hello Christian, how are you doing today?&quot;
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl std">LETTERS</span>
</pre></div>
<div class="output"><pre class="knitr r">##  [1] &quot;A&quot; &quot;B&quot; &quot;C&quot; &quot;D&quot; &quot;E&quot; &quot;F&quot; &quot;G&quot; &quot;H&quot; &quot;I&quot; &quot;J&quot; &quot;K&quot; &quot;L&quot; &quot;M&quot; &quot;N&quot; &quot;O&quot; &quot;P&quot; &quot;Q&quot;
## [18] &quot;R&quot; &quot;S&quot; &quot;T&quot; &quot;U&quot; &quot;V&quot; &quot;W&quot; &quot;X&quot; &quot;Y&quot; &quot;Z&quot;
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">sayHello</span><span class="hl std">(LETTERS)</span>
</pre></div>
<div class="output"><pre class="knitr r">##  [1] &quot;Hello A, how are you doing today?&quot;
##  [2] &quot;Hello B, how are you doing today?&quot;
##  [3] &quot;Hello C, how are you doing today?&quot;
##  [4] &quot;Hello D, how are you doing today?&quot;
##  [5] &quot;Hello E, how are you doing today?&quot;
##  [6] &quot;Hello F, how are you doing today?&quot;
##  [7] &quot;Hello G, how are you doing today?&quot;
##  [8] &quot;Hello H, how are you doing today?&quot;
##  [9] &quot;Hello I, how are you doing today?&quot;
## [10] &quot;Hello J, how are you doing today?&quot;
## [11] &quot;Hello K, how are you doing today?&quot;
## [12] &quot;Hello L, how are you doing today?&quot;
## [13] &quot;Hello M, how are you doing today?&quot;
## [14] &quot;Hello N, how are you doing today?&quot;
## [15] &quot;Hello O, how are you doing today?&quot;
## [16] &quot;Hello P, how are you doing today?&quot;
## [17] &quot;Hello Q, how are you doing today?&quot;
## [18] &quot;Hello R, how are you doing today?&quot;
## [19] &quot;Hello S, how are you doing today?&quot;
## [20] &quot;Hello T, how are you doing today?&quot;
## [21] &quot;Hello U, how are you doing today?&quot;
## [22] &quot;Hello V, how are you doing today?&quot;
## [23] &quot;Hello W, how are you doing today?&quot;
## [24] &quot;Hello X, how are you doing today?&quot;
## [25] &quot;Hello Y, how are you doing today?&quot;
## [26] &quot;Hello Z, how are you doing today?&quot;
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com"># A function that calculates saving needs for retirement</span>
<span class="hl com">########################################################</span>

<span class="hl com"># The input values for the calculation</span>
<span class="hl std">spending</span> <span class="hl kwb">=</span> <span class="hl num">5000</span>
<span class="hl std">interestRate</span> <span class="hl kwb">=</span> <span class="hl num">4</span>
<span class="hl std">T</span> <span class="hl kwb">=</span> <span class="hl num">30</span>

<span class="hl com"># The stupid way to program... </span>
<span class="hl com"># (this does not even deserve the name &quot;programming&quot;)</span>

<span class="hl std">pvSpending</span> <span class="hl kwb">=</span> <span class="hl num">5000</span><span class="hl opt">/</span><span class="hl num">1.04</span><span class="hl opt">^</span><span class="hl num">30</span>
<span class="hl std">pvSpending</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] 1541.593
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com"># A little smarter with using variables</span>

<span class="hl std">pvSpending</span> <span class="hl kwb">=</span> <span class="hl std">spending</span><span class="hl opt">/</span><span class="hl std">(</span><span class="hl num">1</span><span class="hl opt">+</span><span class="hl std">interestRate</span><span class="hl opt">/</span><span class="hl num">100</span><span class="hl std">)</span><span class="hl opt">^</span><span class="hl std">T</span>

<span class="hl com"># The smartest way: Using functions</span>

<span class="hl std">saveFun</span> <span class="hl kwb">=</span> <span class="hl kwa">function</span><span class="hl std">(</span><span class="hl kwc">x</span><span class="hl std">,</span> <span class="hl kwc">r</span><span class="hl std">,</span> <span class="hl kwc">T</span><span class="hl std">){</span>
  <span class="hl kwd">round</span><span class="hl std">(  x</span><span class="hl opt">/</span><span class="hl std">(</span><span class="hl num">1</span><span class="hl opt">+</span><span class="hl std">r</span><span class="hl opt">/</span><span class="hl num">100</span><span class="hl std">)</span><span class="hl opt">^</span><span class="hl std">T  )</span>
<span class="hl std">}</span>
<span class="hl kwd">saveFun</span><span class="hl std">(</span><span class="hl num">5000</span><span class="hl std">,</span> <span class="hl num">0</span><span class="hl std">,</span> <span class="hl num">30</span><span class="hl std">)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] 5000
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com"># Label arguments</span>
<span class="hl com">#################</span>

<span class="hl std">saveFun</span> <span class="hl kwb">=</span> <span class="hl kwa">function</span><span class="hl std">(</span><span class="hl kwc">spending</span><span class="hl std">,</span> <span class="hl kwc">interestRate</span><span class="hl std">,</span>
                   <span class="hl kwc">horizon</span><span class="hl std">){</span>
    <span class="hl std">x</span> <span class="hl kwb">=</span> <span class="hl std">spending</span>
    <span class="hl std">r</span> <span class="hl kwb">=</span> <span class="hl std">interestRate</span>
    <span class="hl std">T</span> <span class="hl kwb">=</span> <span class="hl std">horizon</span>
  <span class="hl kwd">round</span><span class="hl std">(  x</span><span class="hl opt">/</span><span class="hl std">(</span><span class="hl num">1</span><span class="hl opt">+</span><span class="hl std">r</span><span class="hl opt">/</span><span class="hl num">100</span><span class="hl std">)</span><span class="hl opt">^</span><span class="hl std">T  )</span>
<span class="hl std">}</span>

<span class="hl kwd">saveFun</span><span class="hl std">(</span><span class="hl kwc">spending</span> <span class="hl std">=</span> <span class="hl num">5000</span><span class="hl std">,</span> <span class="hl kwc">interestRate</span> <span class="hl std">=</span> <span class="hl num">4</span><span class="hl std">,</span>
        <span class="hl kwc">horizon</span> <span class="hl std">=</span> <span class="hl num">30</span><span class="hl std">)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] 1542
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">saveFun</span><span class="hl std">(</span><span class="hl kwc">horizon</span> <span class="hl std">=</span> <span class="hl num">30</span><span class="hl std">,</span> <span class="hl kwc">spending</span> <span class="hl std">=</span> <span class="hl num">5000</span><span class="hl std">,</span>
        <span class="hl kwc">interestRate</span> <span class="hl std">=</span> <span class="hl num">4</span><span class="hl std">)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] 1542
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">saveFun</span><span class="hl std">(</span><span class="hl num">30</span><span class="hl std">,</span> <span class="hl num">5000</span><span class="hl std">,</span> <span class="hl num">4</span><span class="hl std">)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] 0
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com"># With labels you can change the order of the arguments,</span>
<span class="hl com"># without labels, you cannot.</span>

<span class="hl com"># Default values</span>
<span class="hl com">#################</span>

<span class="hl std">saveFun</span> <span class="hl kwb">=</span> <span class="hl kwa">function</span><span class="hl std">(</span><span class="hl kwc">spending</span> <span class="hl std">=</span> <span class="hl num">5000</span><span class="hl std">,</span>
                   <span class="hl kwc">interestRate</span> <span class="hl std">=</span> <span class="hl num">4</span><span class="hl std">,</span>
                   <span class="hl kwc">horizon</span> <span class="hl std">=</span> <span class="hl num">30</span><span class="hl std">){</span>
  <span class="hl std">x</span> <span class="hl kwb">=</span> <span class="hl std">spending</span>
  <span class="hl std">r</span> <span class="hl kwb">=</span> <span class="hl std">interestRate</span>
  <span class="hl std">T</span> <span class="hl kwb">=</span> <span class="hl std">horizon</span>
  <span class="hl kwd">round</span><span class="hl std">(  x</span><span class="hl opt">/</span><span class="hl std">(</span><span class="hl num">1</span><span class="hl opt">+</span><span class="hl std">r</span><span class="hl opt">/</span><span class="hl num">100</span><span class="hl std">)</span><span class="hl opt">^</span><span class="hl std">T  )</span>
<span class="hl std">}</span>

<span class="hl kwd">saveFun</span><span class="hl std">()</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] 1542
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">saveFun</span><span class="hl std">(</span><span class="hl kwc">spending</span> <span class="hl std">=</span> <span class="hl num">1000</span><span class="hl std">)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] 308
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com"># Optional arguments</span>
<span class="hl com">####################</span>

<span class="hl com"># !!! WARNING: THE CODE BELOW IS INCOMPLETE, </span>
<span class="hl com">#     WE WILL FINISH THIS THE NEXT TIME!!!!</span>

<span class="hl std">saveFun</span> <span class="hl kwb">=</span> <span class="hl kwa">function</span><span class="hl std">(</span><span class="hl kwc">spending</span> <span class="hl std">=</span> <span class="hl num">5000</span><span class="hl std">,</span>
                   <span class="hl kwc">interestRate</span> <span class="hl std">=</span> <span class="hl num">4</span><span class="hl std">,</span>
                   <span class="hl kwc">horizon</span> <span class="hl std">=</span> <span class="hl num">30</span><span class="hl std">,</span>
                   <span class="hl kwc">get.out.as.text</span> <span class="hl std">=</span> <span class="hl kwa">NULL</span><span class="hl std">){</span>
  <span class="hl std">x</span> <span class="hl kwb">=</span> <span class="hl std">spending</span>
  <span class="hl std">r</span> <span class="hl kwb">=</span> <span class="hl std">interestRate</span>
  <span class="hl std">T</span> <span class="hl kwb">=</span> <span class="hl std">horizon</span>
  <span class="hl std">out</span> <span class="hl kwb">=</span> <span class="hl kwd">round</span><span class="hl std">(  x</span><span class="hl opt">/</span><span class="hl std">(</span><span class="hl num">1</span><span class="hl opt">+</span><span class="hl std">r</span><span class="hl opt">/</span><span class="hl num">100</span><span class="hl std">)</span><span class="hl opt">^</span><span class="hl std">T  )</span>

  <span class="hl kwa">if</span><span class="hl std">(</span>  <span class="hl opt">!</span><span class="hl kwd">is.null</span><span class="hl std">(get.out.as.text)  ){</span>
    <span class="hl kwd">cat</span><span class="hl std">(</span><span class="hl kwd">sprintf</span><span class="hl std">(</span><span class="hl str">&quot;If you want to spend %s after %s years
and the interest rate is %s percent, 
you have to save %s.&quot;</span><span class="hl std">, x, T, r, out))</span>
  <span class="hl std">}</span>


<span class="hl std">}</span>

<span class="hl std">x</span> <span class="hl kwb">=</span> <span class="hl num">5000</span><span class="hl std">; T</span> <span class="hl kwb">=</span> <span class="hl num">30</span><span class="hl std">; r</span> <span class="hl kwb">=</span> <span class="hl num">4</span>
</pre></div>
</div></div>



<h2 id="lecture3_homesolution">Solution of Home Assignment for Lecture 3</h2>

<p>The suggested solution for the home assignment of Lecture 3 is available in <a href = "Homework_Lec3.R" download>this script file</a>. Note that there are many other possible solutions, some shorter and more elegant, some a little longer.</p>

<!-- ####################################################### -->



<h1 id="lecture4">Lecture 4</h1>

<p>In this lecture, we start with working on real data. In particular, we will consider data on Swiss Franc exchange rates and how the latter relate to Swiss imports and exports. You need to download the data from the website of the Swiss National Bank to your device before the lecture. You can find the instructions how to do so in <a href = "pdfs/Downloading SNB data and reading CSV files.pdf" target= "_blank">this document</a>.
</p>

<!--
<p>Just in case something really went wrong with downloading the data from the website of the Swiss National Bank, or with reading the data into R, you can get them 
directly in <code>RData</code> format <a href = "data/rawXrates.RData" download>here</a>. Do not open this data by double clicking. Rather copy it into the folder where you have the other data files for this course, and then use the <code>load()</code> command from within an R script.</p>
-->

<!--

<p>In order to progress a little faster during class, I already prepared two R scripts:
<ul>
<li>Completing the savFun function from last time, with an optional argument <a href = "Lec4_forClass1.R" download>[download]</a>
<li>Reading data into R and working with them<a href = "Lec4_forClass2.R" download> [download]</a>
</ul>
</p>
-->



<h2 id="lecture4_codelive" >&ldquo;Live&rdquo; Code from Lecture 4</h2>

<p>If you prefer the &ldquo;live&rdquo; code as pdf, you can get it <a href="pdfs/Lec4_live.pdf" target = "_blank">here</a>.</p>


<div class="chunk" id="unnamed-chunk-6"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl com">############################################</span>
<span class="hl com"># LECTURE 4, Part 1: Completing function   #</span>
<span class="hl com"># from last time with an optional argument #</span>
<span class="hl com">############################################</span>

<span class="hl com"># During Lecture 3 we worked on a function with an optional</span>
<span class="hl com"># or &quot;NULL&quot; argument: if the argument get.out.as.text is not NULL,</span>
<span class="hl com"># then the function saveFun would get the output as text.</span>

<span class="hl com"># In this function, we introduced two new R functions:</span>
<span class="hl com"># sprintf, and the conditional.</span>


<span class="hl com"># sprintf</span>
<span class="hl com">#########</span>


<span class="hl std">x</span> <span class="hl kwb">=</span> <span class="hl num">5000</span><span class="hl std">; T</span> <span class="hl kwb">=</span> <span class="hl num">30</span><span class="hl std">; r</span> <span class="hl kwb">=</span> <span class="hl num">4</span>
<span class="hl std">out</span> <span class="hl kwb">=</span> <span class="hl kwd">round</span><span class="hl std">(  x</span><span class="hl opt">/</span><span class="hl std">(</span><span class="hl num">1</span><span class="hl opt">+</span><span class="hl std">r</span><span class="hl opt">/</span><span class="hl num">100</span><span class="hl std">)</span><span class="hl opt">^</span><span class="hl std">T  )</span>
<span class="hl com"># Note that you can run several commands on one line, </span>
<span class="hl com"># separated by semicolons</span>


<span class="hl kwd">sprintf</span><span class="hl std">(</span><span class="hl str">&quot;If you want to spend %s after %s years
and the interest rate is %s percent, 
you have to save %s.&quot;</span><span class="hl std">, x, T, r, out)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] &quot;If you want to spend 5000 after 30 years\nand the interest rate is 4 percent, \nyou have to save 1542.&quot;
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com"># Note: The s in &quot;%s&quot; means &quot;string&quot;. See Section 8.2 in </span>
<span class="hl com"># &quot;R for Everyone&quot;.</span>

<span class="hl com"># If you want get rid of the editing symbols like &quot;&quot; or \n, you have</span>
<span class="hl com"># to use the cat function</span>


<span class="hl kwd">cat</span><span class="hl std">(</span><span class="hl kwd">sprintf</span><span class="hl std">(</span><span class="hl str">&quot;If you want\t to spend %s\n after %s years
and the\n interest\t rate is %s percent, 
you have to save %s.&quot;</span><span class="hl std">, x, T, r, out))</span>
</pre></div>
<div class="output"><pre class="knitr r">## If you want	 to spend 5000
##  after 30 years
## and the
##  interest	 rate is 4 percent, 
## you have to save 1542.
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com"># Conditionals</span>
<span class="hl com">##############</span>

<span class="hl com"># See Chapter 9 in &quot;R for Everyone&quot;</span>

<span class="hl std">arg</span> <span class="hl kwb">=</span> <span class="hl str">&quot;yes&quot;</span>

<span class="hl kwa">if</span> <span class="hl std">(arg</span> <span class="hl opt">==</span>  <span class="hl str">&quot;no&quot;</span><span class="hl std">){</span>
  <span class="hl kwd">print</span><span class="hl std">(</span><span class="hl str">&quot;I have nothing to say :-(&quot;</span><span class="hl std">)</span>
<span class="hl std">}</span>


<span class="hl com"># So what if arg = &quot;yes&quot;?</span>

<span class="hl std">arg</span> <span class="hl kwb">=</span> <span class="hl str">&quot;yes&quot;</span>

<span class="hl kwa">if</span> <span class="hl std">(arg</span> <span class="hl opt">==</span>  <span class="hl str">&quot;no&quot;</span><span class="hl std">){</span>
  <span class="hl kwd">print</span><span class="hl std">(</span><span class="hl str">&quot;I have nothing to say :-(&quot;</span><span class="hl std">)</span>
<span class="hl std">}</span>

<span class="hl kwa">if</span> <span class="hl std">(arg</span> <span class="hl opt">==</span>  <span class="hl str">&quot;yes&quot;</span><span class="hl std">){</span>
  <span class="hl kwd">print</span><span class="hl std">(</span><span class="hl str">&quot;I have nothing to say :-)&quot;</span><span class="hl std">)</span>
<span class="hl std">}</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] &quot;I have nothing to say :-)&quot;
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl std">arg</span> <span class="hl kwb">=</span> <span class="hl str">&quot;no&quot;</span>

<span class="hl kwa">if</span> <span class="hl std">(arg</span> <span class="hl opt">==</span>  <span class="hl str">&quot;no&quot;</span><span class="hl std">){</span>
  <span class="hl kwd">print</span><span class="hl std">(</span><span class="hl str">&quot;I have nothing to say :-(&quot;</span><span class="hl std">)</span>
<span class="hl std">}</span> <span class="hl kwa">else if</span> <span class="hl std">(arg</span><span class="hl opt">==</span><span class="hl str">&quot;yes&quot;</span><span class="hl std">){</span>
  <span class="hl kwd">print</span><span class="hl std">(</span><span class="hl str">&quot;:-))&quot;</span><span class="hl std">)</span>
<span class="hl std">}</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] &quot;I have nothing to say :-(&quot;
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com"># Be very careful with the positions of the curly brackets</span>
<span class="hl com"># If they are not in the right position, you will get</span>
<span class="hl com"># an error. This can sometimes be quite tricky.</span>


<span class="hl com"># Now let's make a function of this</span>

<span class="hl std">saySomething</span> <span class="hl kwb">=</span> <span class="hl kwa">function</span><span class="hl std">(</span><span class="hl kwc">arg</span><span class="hl std">){</span>

  <span class="hl com">#copy/paste from above</span>
  <span class="hl kwa">if</span> <span class="hl std">(arg</span> <span class="hl opt">==</span>  <span class="hl str">&quot;no&quot;</span><span class="hl std">){</span>
    <span class="hl kwd">print</span><span class="hl std">(</span><span class="hl str">&quot;I have nothing to say :-(&quot;</span><span class="hl std">)</span>
  <span class="hl std">}</span> <span class="hl kwa">else if</span> <span class="hl std">(arg</span><span class="hl opt">==</span><span class="hl str">&quot;yes&quot;</span><span class="hl std">){</span>
    <span class="hl kwd">print</span><span class="hl std">(</span><span class="hl str">&quot;:-))&quot;</span><span class="hl std">)</span>
  <span class="hl std">}</span>
<span class="hl std">}</span>

<span class="hl kwd">saySomething</span><span class="hl std">(</span><span class="hl str">&quot;no&quot;</span><span class="hl std">)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] &quot;I have nothing to say :-(&quot;
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">saySomething</span><span class="hl std">(</span><span class="hl str">&quot;yes&quot;</span><span class="hl std">)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] &quot;:-))&quot;
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com"># Now we go back to our savings function</span>
<span class="hl com">########################################</span>

<span class="hl std">a</span> <span class="hl kwb">=</span> <span class="hl kwa">NULL</span>
<span class="hl std">b</span> <span class="hl kwb">=</span> <span class="hl str">&quot;yes&quot;</span>
<span class="hl kwd">is.null</span><span class="hl std">(a)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] TRUE
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">is.null</span><span class="hl std">(b)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] FALSE
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl std">get.out.as.text</span> <span class="hl kwb">=</span> <span class="hl str">&quot;yes&quot;</span>

<span class="hl std">saveFun</span> <span class="hl kwb">=</span> <span class="hl kwa">function</span><span class="hl std">(</span><span class="hl kwc">spending</span> <span class="hl std">=</span> <span class="hl num">5000</span><span class="hl std">,</span>
                   <span class="hl kwc">interestRate</span> <span class="hl std">=</span> <span class="hl num">4</span><span class="hl std">,</span>
                   <span class="hl kwc">horizon</span> <span class="hl std">=</span> <span class="hl num">30</span><span class="hl std">,</span>
                   <span class="hl kwc">get.out.as.text</span> <span class="hl std">=</span> <span class="hl kwa">NULL</span><span class="hl std">){</span>
  <span class="hl std">x</span> <span class="hl kwb">=</span> <span class="hl std">spending</span>
  <span class="hl std">r</span> <span class="hl kwb">=</span> <span class="hl std">interestRate</span>
  <span class="hl std">T</span> <span class="hl kwb">=</span> <span class="hl std">horizon</span>
  <span class="hl std">out</span> <span class="hl kwb">=</span> <span class="hl kwd">round</span><span class="hl std">(  x</span><span class="hl opt">/</span><span class="hl std">(</span><span class="hl num">1</span><span class="hl opt">+</span><span class="hl std">r</span><span class="hl opt">/</span><span class="hl num">100</span><span class="hl std">)</span><span class="hl opt">^</span><span class="hl std">T  )</span>

  <span class="hl kwa">if</span> <span class="hl std">(</span><span class="hl kwd">is.null</span><span class="hl std">(get.out.as.text)){</span>
    <span class="hl kwd">return</span><span class="hl std">(out)</span>
    <span class="hl com"># everything in a function that comes after return is not executed</span>
    <span class="hl com"># if return is executed...</span>

  <span class="hl std">}</span> <span class="hl kwa">else if</span> <span class="hl std">(get.out.as.text</span> <span class="hl opt">==</span> <span class="hl str">&quot;yes&quot;</span><span class="hl std">){</span>
    <span class="hl kwd">cat</span><span class="hl std">(</span><span class="hl kwd">sprintf</span><span class="hl std">(</span><span class="hl str">&quot;If you want to spend %s after %s years
and the interest rate is %s percent, 
you have to save %s!&quot;</span><span class="hl std">, x, T, r, out))</span>
  <span class="hl std">}</span>
<span class="hl std">}</span>

<span class="hl kwd">saveFun</span><span class="hl std">()</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] 1542
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">saveFun</span><span class="hl std">(</span><span class="hl kwc">get.out.as.text</span> <span class="hl std">=</span> <span class="hl str">&quot;yes&quot;</span><span class="hl std">)</span>
</pre></div>
<div class="output"><pre class="knitr r">## If you want to spend 5000 after 30 years
## and the interest rate is 4 percent, 
## you have to save 1542!
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">saveFun</span><span class="hl std">(</span><span class="hl kwc">spending</span> <span class="hl std">=</span> <span class="hl num">5000</span><span class="hl std">,</span>
        <span class="hl kwc">interestRate</span> <span class="hl std">=</span> <span class="hl num">1</span><span class="hl std">,</span>
        <span class="hl kwc">horizon</span> <span class="hl std">=</span> <span class="hl num">30</span><span class="hl std">,</span>
        <span class="hl kwc">get.out.as.text</span> <span class="hl std">=</span> <span class="hl str">&quot;yes&quot;</span><span class="hl std">)</span>
</pre></div>
<div class="output"><pre class="knitr r">## If you want to spend 5000 after 30 years
## and the interest rate is 1 percent, 
## you have to save 3710!
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">saveFun</span><span class="hl std">(</span><span class="hl kwc">spending</span> <span class="hl std">=</span> <span class="hl num">5000</span><span class="hl std">,</span>
        <span class="hl kwc">interestRate</span> <span class="hl std">=</span> <span class="hl opt">-</span><span class="hl num">0.5</span><span class="hl std">,</span>
        <span class="hl kwc">horizon</span> <span class="hl std">=</span> <span class="hl num">30</span><span class="hl std">)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] 5811
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com">###########################################################################</span>

<span class="hl com">###########################################################################</span>


<span class="hl com">####################################################</span>
<span class="hl com"># LECTURE 4, Part 2: Reading data from csv files   #</span>
<span class="hl com">####################################################</span>




<span class="hl com"># See Section 6.1 and 5.1 in &quot;R for Everyone&quot;. </span>

<span class="hl kwd">rm</span><span class="hl std">(</span><span class="hl kwc">list</span> <span class="hl std">=</span> <span class="hl kwd">ls</span><span class="hl std">())</span>

<span class="hl com"># Set the working directory to the folder</span>
<span class="hl com"># where you have the csv files from the SNB</span>


<span class="hl com"># On a Mac it may look like this</span>
<span class="hl com">#setwd(&quot;/Users/Thomas/Dropbox/Programmierkurs/Data&quot;)</span>

<span class="hl com"># On Windows it may look like this</span>
<span class="hl com">#setwd(&quot;D:/Programmierkurs/Data&quot;)</span>

<span class="hl com"># Note the forward slashes in the directory!!!!!</span>


<span class="hl com"># Load the data... Which one</span>
<span class="hl com"># works for you?</span>

<span class="hl std">rawData</span> <span class="hl kwb">=</span> <span class="hl kwd">read.csv</span><span class="hl std">(</span><span class="hl kwc">file</span> <span class="hl std">=</span> <span class="hl str">&quot;data/SNB Xrates downloaded.csv&quot;</span><span class="hl std">)</span>

<span class="hl std">rawXrates</span> <span class="hl kwb">=</span> <span class="hl kwd">read.csv</span><span class="hl std">(</span><span class="hl kwc">file</span> <span class="hl std">=</span> <span class="hl str">&quot;data/SNB Xrates downloaded clean.csv&quot;</span><span class="hl std">)</span>

<span class="hl std">rawXrates</span> <span class="hl kwb">=</span>
  <span class="hl kwd">read.csv</span><span class="hl std">(</span><span class="hl kwc">file</span> <span class="hl std">=</span>
             <span class="hl str">&quot;data/SNB Xrates downloaded clean.csv&quot;</span><span class="hl std">,</span>
           <span class="hl kwc">sep</span> <span class="hl std">=</span> <span class="hl str">&quot;,&quot;</span><span class="hl std">)</span>

<span class="hl std">rawXrates</span><span class="hl opt">$</span><span class="hl std">XX</span> <span class="hl kwb">=</span> <span class="hl num">NA</span>

<span class="hl com"># In my case, there are still the empty rows and columns. </span>
<span class="hl com"># However, even if you do not have them, you can execute </span>
<span class="hl com"># the below commands</span>

<span class="hl com"># What is the type of rawXrates?</span>
<span class="hl kwd">class</span><span class="hl std">(rawXrates)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] &quot;data.frame&quot;
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com"># Get the names of the columns (&quot;variables&quot;</span>
<span class="hl com"># in the statistical sense)</span>
<span class="hl kwd">names</span><span class="hl std">(rawXrates)</span>
</pre></div>
<div class="output"><pre class="knitr r">##  [1] &quot;Date&quot;  &quot;X&quot;     &quot;X.1&quot;   &quot;D0&quot;    &quot;X.2&quot;   &quot;X.3&quot;   &quot;X.4&quot;   &quot;X.5&quot;  
##  [9] &quot;D1&quot;    &quot;X.6&quot;   &quot;X.7&quot;   &quot;X.8&quot;   &quot;X.9&quot;   &quot;Value&quot; &quot;XX&quot;
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com"># You can use the names to get a column</span>


<span class="hl kwd">head</span><span class="hl std">(rawXrates[</span><span class="hl str">&quot;Date&quot;</span><span class="hl std">])</span>
</pre></div>
<div class="output"><pre class="knitr r">##      Date
## 1 1914-01
## 2 1914-01
## 3 1914-01
## 4 1914-01
## 5 1914-01
## 6 1914-01
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com"># Use this trick to select only the variables we are interested in</span>

<span class="hl std">varList</span> <span class="hl kwb">=</span> <span class="hl kwd">c</span><span class="hl std">(</span><span class="hl str">&quot;Date&quot;</span><span class="hl std">,</span> <span class="hl str">&quot;D0&quot;</span><span class="hl std">,</span> <span class="hl str">&quot;D1&quot;</span><span class="hl std">,</span> <span class="hl str">&quot;Value&quot;</span><span class="hl std">)</span>

<span class="hl std">rawXrates</span> <span class="hl kwb">=</span> <span class="hl std">rawXrates[varList]</span>

<span class="hl kwd">head</span><span class="hl std">(rawXrates)</span>
</pre></div>
<div class="output"><pre class="knitr r">##      Date D0     D1 Value
## 1 1914-01 M0   EUR1    NA
## 2 1914-01 M0   GBP1 25.28
## 3 1914-01 M0 DKK100    NA
## 4 1914-01 M0 NOK100    NA
## 5 1914-01 M0 CZK100    NA
## 6 1914-01 M0 HUF100    NA
</pre></div>
</div></div>


<h2 id="lecture4_homeassignment">Data for Home Assignment for Lecture 4</h2>

<p>Try to get the following data &ldquo;clean&rdquo; into Excel:
<ul>
<li><a href = "data/toImport1.csv" download>Data set 1</a>
<li><a href = "data/toImport2.csv" download>Data set 2</a>
<li><a href = "data/toImport3.csv" download>Data set 3</a>
</ul>
</p>

<p>See StudyNet under &ldquo;Abgabe&rdquo; for further instructions.</p>


<!-- ############################################################### -->


<h1 id="lecture5">Lecture 5</h1>


<h2 id="lecture5_problemsReading" class="noBackToTop">Problems: What if some numbers are automatically converted to dates?</h2>

<p>During Lecture 5, several of you had the problem that some selective values of exchange rates were automatically converted into dates. This produced some rather bizarre-looking graphics of the time series of exchange rates. Furthermore, a few of you also still had problems getting the <code>OECD Main Economic Indicators</code> into R. I will probably write a little more on this later, but here are some quick fixes. Below, I just post the data in <code>RData</code> format. These files have never been opened in Excel, so they should not be infected by the mentioned problems.</p>



<p><ul>
<li><a href = "data/rawXrates.RData" download>SNB exchange rate data</a>
<li><a href = "data/rawExpImp.RData" download>SNB data on exports and imports</a> (for next lecture)
<li><a href = "data/OECD_MEI.RData" download>OECD MEI data</a> (for home assignment)
</ul></p>


<p>Download these data and put them into the folder where you have the other data for this course. Then proceed as follows (adjust the working directory to your own settings):

<div class="chunk" id="unnamed-chunk-7"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl kwd">setwd</span><span class="hl std">(</span><span class="hl str">&quot;D:/Dropbox/Mac&amp;Surf/Programmierkurs Dropb/Data&quot;</span><span class="hl std">)</span>

<span class="hl kwd">load</span><span class="hl std">(</span><span class="hl str">&quot;rawXrates.RData&quot;</span><span class="hl std">)</span>
<span class="hl kwd">head</span><span class="hl std">(rawXrates,</span> <span class="hl num">10</span><span class="hl std">)</span>
</pre></div>
<div class="output"><pre class="knitr r">##       Date D0     D1 Value
## 1  1914-01 M0   EUR1    NA
## 2  1914-01 M0   GBP1 25.28
## 3  1914-01 M0 DKK100    NA
## 4  1914-01 M0 NOK100    NA
## 5  1914-01 M0 CZK100    NA
## 6  1914-01 M0 HUF100    NA
## 7  1914-01 M0 PLN100    NA
## 8  1914-01 M0 RUB100    NA
## 9  1914-01 M0 SEK100    NA
## 10 1914-01 M0 TRY100    NA
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">load</span><span class="hl std">(</span><span class="hl str">&quot;rawExpImp.RData&quot;</span><span class="hl std">)</span>
<span class="hl kwd">head</span><span class="hl std">(rawExpImp,</span> <span class="hl num">10</span><span class="hl std">)</span>
</pre></div>
<div class="output"><pre class="knitr r">##       Date D0  D1  D2    Value
## 1  1988-01  E   T WMF 4825.527
## 2  1988-01  E   T   N       NA
## 3  1988-01  E   T   R       NA
## 4  1988-01  E MAE WMF  961.034
## 5  1988-01  E MAE   N       NA
## 6  1988-01  E MAE   R       NA
## 7  1988-01  E PUB WMF  247.840
## 8  1988-01  E PUB   N       NA
## 9  1988-01  E PUB   R       NA
## 10 1988-01  E   C WMF  649.854
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">load</span><span class="hl std">(</span><span class="hl str">&quot;OECD_MEI.RData&quot;</span><span class="hl std">)</span>
<span class="hl kwd">head</span><span class="hl std">(OECD_MEI,</span> <span class="hl num">10</span><span class="hl std">)</span>
</pre></div>
<div class="output"><pre class="knitr r">##    Ã¯..LOCATION Country  SUBJECT
## 1          GRC  Greece LOCOABNO
## 2          GRC  Greece LOCOABNO
## 3          GRC  Greece LOCOABNO
## 4          GRC  Greece LOCOABNO
## 5          GRC  Greece LOCOABNO
## 6          GRC  Greece LOCOABNO
## 7          GRC  Greece LOCOABNO
## 8          GRC  Greece LOCOABNO
## 9          GRC  Greece LOCOABNO
## 10         GRC  Greece LOCOABNO
##                                                                    Subject
## 1  Leading Indicators OECD &gt; Component series &gt; Bank activity &gt; Normalised
## 2  Leading Indicators OECD &gt; Component series &gt; Bank activity &gt; Normalised
## 3  Leading Indicators OECD &gt; Component series &gt; Bank activity &gt; Normalised
## 4  Leading Indicators OECD &gt; Component series &gt; Bank activity &gt; Normalised
## 5  Leading Indicators OECD &gt; Component series &gt; Bank activity &gt; Normalised
## 6  Leading Indicators OECD &gt; Component series &gt; Bank activity &gt; Normalised
## 7  Leading Indicators OECD &gt; Component series &gt; Bank activity &gt; Normalised
## 8  Leading Indicators OECD &gt; Component series &gt; Bank activity &gt; Normalised
## 9  Leading Indicators OECD &gt; Component series &gt; Bank activity &gt; Normalised
## 10 Leading Indicators OECD &gt; Component series &gt; Bank activity &gt; Normalised
##    MEASURE                                Measure FREQUENCY Frequency
## 1     STSA Level, rate or national currency, s.a.         M   Monthly
## 2     STSA Level, rate or national currency, s.a.         M   Monthly
## 3     STSA Level, rate or national currency, s.a.         M   Monthly
## 4     STSA Level, rate or national currency, s.a.         M   Monthly
## 5     STSA Level, rate or national currency, s.a.         M   Monthly
## 6     STSA Level, rate or national currency, s.a.         M   Monthly
## 7     STSA Level, rate or national currency, s.a.         M   Monthly
## 8     STSA Level, rate or national currency, s.a.         M   Monthly
## 9     STSA Level, rate or national currency, s.a.         M   Monthly
## 10    STSA Level, rate or national currency, s.a.         M   Monthly
##       TIME     Time Unit.Code  Unit PowerCode.Code PowerCode
## 1  2016-01 Jan-2016       IDX Index              0     Units
## 2  2016-02 Feb-2016       IDX Index              0     Units
## 3  2016-03 Mar-2016       IDX Index              0     Units
## 4  2016-04 Apr-2016       IDX Index              0     Units
## 5  2016-05 May-2016       IDX Index              0     Units
## 6  2016-06 Jun-2016       IDX Index              0     Units
## 7  2016-07 Jul-2016       IDX Index              0     Units
## 8  2016-08 Aug-2016       IDX Index              0     Units
## 9  2016-09 Sep-2016       IDX Index              0     Units
## 10 2016-10 Oct-2016       IDX Index              0     Units
##    Reference.Period.Code Reference.Period    Value Flag.Codes Flags
## 1                                         102.2102                 
## 2                                         102.2637                 
## 3                                         102.1797                 
## 4                                         102.0086                 
## 5                                         101.7997                 
## 6                                         101.5977                 
## 7                                         101.4323                 
## 8                                         101.3028                 
## 9                                         101.2031                 
## 10                                        101.1224
</pre></div>
</div></div>

<p>You should now be able to run the script file from Lecture 5 with that data (you may have to make some minor adjustments in the code).</p>

<h2 id="lecture5_codelive" >&ldquo;Live&rdquo; Code from Lecture 5</h2>

<p>Get &ldquo;live&rdquo; code as <a href="pdfs/Lec5_live.pdf" target = "_blank">pdf</a>.</p>


<div class="chunk" id="unnamed-chunk-8"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl com">#############################################</span>
<span class="hl com"># LECTURE 5: Handling data and data.frames  #</span>
<span class="hl com">#############################################</span>


<span class="hl com"># We will continute working with the data sets for the SNB</span>
<span class="hl com"># That you downloaded for Lecture 4. </span>

<span class="hl com"># This time, we are assuming that the data already look neat</span>
<span class="hl com"># So no deletion of empty columns any more.</span>

<span class="hl com"># Preparatory steps</span>
<span class="hl com">###################</span>

<span class="hl com"># Almost everytime you work with data, you should do the </span>
<span class="hl com"># following steps...</span>

<span class="hl kwd">rm</span><span class="hl std">(</span><span class="hl kwc">list</span> <span class="hl std">=</span> <span class="hl kwd">ls</span><span class="hl std">())</span> <span class="hl com"># Empty workspace to start with a &quot;clean sheet&quot;</span>

<span class="hl com"># REPLACE THE WORKING DIRECTORY BELOW WITH THE ONE FOR YOUR DEVICE</span>
<span class="hl kwd">setwd</span><span class="hl std">(</span><span class="hl str">&quot;D:/Dropbox/Mac&amp;Surf/Programmierkurs Dropb/Data&quot;</span><span class="hl std">)</span>


<span class="hl com"># Read the data</span>
<span class="hl com">###############</span>

<span class="hl com"># Last time, we read the data like this:</span>
<span class="hl std">rawXrates</span> <span class="hl kwb">=</span> <span class="hl kwd">read.csv</span><span class="hl std">(</span>
  <span class="hl kwc">file</span> <span class="hl std">=</span> <span class="hl str">&quot;SNB Xrates downloaded clean noEmptyCol.csv&quot;</span><span class="hl std">,</span> <span class="hl kwc">sep</span> <span class="hl std">=</span> <span class="hl str">&quot;,&quot;</span><span class="hl std">)</span>

<span class="hl com"># For some of you, sep should take the value &quot;;&quot;.</span>

<span class="hl com"># However, for some of you, the column names may land in the first row,</span>
<span class="hl com"># which is not the idea. So add &quot;header = TRUE&quot;:</span>
<span class="hl std">rawXrates</span> <span class="hl kwb">=</span> <span class="hl kwd">read.csv</span><span class="hl std">(</span><span class="hl kwc">file</span> <span class="hl std">=</span>
   <span class="hl str">&quot;SNB Xrates downloaded clean noEmptyCol.csv&quot;</span><span class="hl std">,</span>
       <span class="hl kwc">sep</span> <span class="hl std">=</span> <span class="hl str">&quot;,&quot;</span><span class="hl std">,</span> <span class="hl kwc">header</span> <span class="hl std">=</span> <span class="hl num">TRUE</span><span class="hl std">)</span>



<span class="hl com"># Referring to columns in data.frames</span>
<span class="hl com">#####################################</span>

<span class="hl com"># There are (at least) two ways to refer to a column:</span>

<span class="hl com"># rawXrates[[&quot;D0&quot;]]</span>
<span class="hl com"># rawXrates$D0</span>

<span class="hl com"># For instance, you can use this for</span>
<span class="hl com"># getting all the values in a column</span>

<span class="hl kwd">length</span><span class="hl std">(</span><span class="hl kwd">unique</span><span class="hl std">(rawXrates</span><span class="hl opt">$</span><span class="hl std">D0))</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] 2
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">table</span><span class="hl std">(rawXrates</span><span class="hl opt">$</span><span class="hl std">D0)</span>
</pre></div>
<div class="output"><pre class="knitr r">## 
##    M0    M1 
## 32058 32058
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com"># or the type</span>

<span class="hl kwd">class</span><span class="hl std">(rawXrates[[</span><span class="hl str">&quot;D0&quot;</span><span class="hl std">]])</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] &quot;factor&quot;
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com"># Note the subtle difference between</span>
<span class="hl kwd">class</span><span class="hl std">(rawXrates[[</span><span class="hl str">&quot;D0&quot;</span><span class="hl std">]])</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] &quot;factor&quot;
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com"># and</span>
<span class="hl kwd">class</span><span class="hl std">(rawXrates[</span><span class="hl str">&quot;D0&quot;</span><span class="hl std">])</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] &quot;data.frame&quot;
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com"># Sometimes, this matters, sometimes not...</span>
<span class="hl com"># For deleting empty columns, it does not.</span>

<span class="hl com"># NOTE: Our data is in the so-called &quot;long&quot; format: all variables (in the statistical</span>
<span class="hl com"># sense) are &quot;stacked&quot;.</span>

<span class="hl com"># The statistical variable names are a combination of D0 and D1.</span>

<span class="hl com"># The SNB does not make it too easy to get the meaning of D0. But if you go</span>
<span class="hl com"># to the Data Portal https://data.snb.ch/de/topics/ziredev#!/cube/devkum</span>
<span class="hl com"># and download the data in Excel format (which, by the way, is useless for </span>
<span class="hl com"># reading the data into R), you get the meaning of the exchange rates.</span>


<span class="hl com"># Converting data from &quot;long&quot; to &quot;wide&quot; and back to &quot;long&quot;</span>
<span class="hl com">##########################################################</span>

<span class="hl com"># See &quot;R for Everyone&quot;, Section 12.3</span>

<span class="hl com"># R comes with lots of &quot;packages&quot;. For converting data from long to wide</span>
<span class="hl com"># we need the package &quot;reshape2&quot;</span>

<span class="hl com"># A package is intalled like this:</span>
<span class="hl com"># install.packages(&quot;reshape2&quot;)</span>
<span class="hl com"># Do this only once on your machine</span>

<span class="hl com"># Everytime you use a package, you have to &quot;call&quot; or &quot;load&quot; it</span>
<span class="hl kwd">library</span><span class="hl std">(reshape2)</span>
<span class="hl com"># or</span>
<span class="hl kwd">require</span><span class="hl std">(reshape2)</span>


<span class="hl std">wide</span> <span class="hl kwb">=</span> <span class="hl kwd">dcast</span><span class="hl std">(rawXrates,</span> <span class="hl com"># the data frame</span>
             <span class="hl std">Date</span> <span class="hl opt">~</span> <span class="hl com"># the variable that is to</span>
               <span class="hl com"># 'IDENTIFY' ROWS of new</span>
               <span class="hl com"># variables! Note the '~'!</span>
               <span class="hl std">D0</span> <span class="hl opt">+</span> <span class="hl std">D1 ,</span> <span class="hl com"># the column(s) containing </span>
             <span class="hl com"># what you want to become</span>
             <span class="hl com"># the new variable NAMES </span>
             <span class="hl kwc">value.var</span> <span class="hl std">=</span> <span class="hl str">&quot;Value&quot;</span><span class="hl std">)</span>  <span class="hl com"># column that contains the </span>
              <span class="hl com"># VALUES of the new variables</span>
              <span class="hl com"># (often, you can ommit this)</span>

<span class="hl com"># In short:</span>
<span class="hl std">wide</span> <span class="hl kwb">=</span> <span class="hl kwd">dcast</span><span class="hl std">(rawXrates, Date</span> <span class="hl opt">~</span> <span class="hl std">D0</span> <span class="hl opt">+</span> <span class="hl std">D1)</span>
</pre></div>
<div class="message"><pre class="knitr r">## Using Value as value column: use value.var to override.
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com"># Check out, what the following would do:</span>
<span class="hl std">wide</span> <span class="hl kwb">=</span> <span class="hl kwd">dcast</span><span class="hl std">(rawXrates, Date</span> <span class="hl opt">~</span> <span class="hl std">D0)</span>
</pre></div>
<div class="message"><pre class="knitr r">## Using Value as value column: use value.var to override.
</pre></div>
<div class="message"><pre class="knitr r">## Aggregation function missing: defaulting to length
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl std">wide</span> <span class="hl kwb">=</span> <span class="hl kwd">dcast</span><span class="hl std">(rawXrates, Date</span> <span class="hl opt">~</span> <span class="hl std">D1)</span>
</pre></div>
<div class="message"><pre class="knitr r">## Using Value as value column: use value.var to override.
## Aggregation function missing: defaulting to length
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl std">wide</span> <span class="hl kwb">=</span> <span class="hl kwd">dcast</span><span class="hl std">(rawXrates, Date</span> <span class="hl opt">~</span> <span class="hl std">D0</span> <span class="hl opt">+</span> <span class="hl std">D1)</span>
</pre></div>
<div class="message"><pre class="knitr r">## Using Value as value column: use value.var to override.
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com"># Let's go back to &quot;long&quot;. For the moment, this is more useful</span>

<span class="hl std">long</span> <span class="hl kwb">=</span> <span class="hl kwd">melt</span><span class="hl std">(wide,</span> <span class="hl kwc">id.vars</span> <span class="hl std">=</span> <span class="hl str">&quot;Date&quot;</span><span class="hl std">,</span>
            <span class="hl kwc">value.name</span> <span class="hl std">=</span> <span class="hl str">&quot;Value&quot;</span><span class="hl std">)</span>

<span class="hl com"># D0 and D1 are now merged. We could change this, but</span>
<span class="hl com"># we have more important things to do...</span>


<span class="hl com"># Recoding date as numerical, and a unique time identifier</span>
<span class="hl com">#########################################################</span>

<span class="hl com"># Our data looks really enormously big</span>
<span class="hl com"># Let's say we only care about data from 2000 on</span>
<span class="hl com"># to start with... </span>

<span class="hl com"># The next lines of code are preparations for</span>
<span class="hl com"># data from 2000 on (or any other year)</span>


<span class="hl com">#install.packages(&quot;stringr&quot;)</span>
<span class="hl kwd">library</span><span class="hl std">(stringr)</span>

<span class="hl std">rawXrates</span><span class="hl opt">$</span><span class="hl std">year</span> <span class="hl kwb">=</span> <span class="hl kwd">as.numeric</span><span class="hl std">(</span>
  <span class="hl kwd">substr</span><span class="hl std">(rawXrates</span><span class="hl opt">$</span><span class="hl std">Date,</span> <span class="hl kwc">start</span> <span class="hl std">=</span> <span class="hl num">1</span><span class="hl std">,</span> <span class="hl kwc">stop</span> <span class="hl std">=</span> <span class="hl num">4</span><span class="hl std">)  )</span>

<span class="hl std">rawXrates</span><span class="hl opt">$</span><span class="hl std">month</span> <span class="hl kwb">=</span> <span class="hl kwd">as.numeric</span><span class="hl std">(</span>
  <span class="hl kwd">substr</span><span class="hl std">(rawXrates</span><span class="hl opt">$</span><span class="hl std">Date,</span> <span class="hl kwc">start</span> <span class="hl std">=</span> <span class="hl num">6</span><span class="hl std">,</span> <span class="hl kwc">stop</span> <span class="hl std">=</span> <span class="hl num">7</span><span class="hl std">)  )</span>


<span class="hl com"># A unique identifier for time</span>
<span class="hl std">rawXrates</span><span class="hl opt">$</span><span class="hl std">timeID</span> <span class="hl kwb">=</span> <span class="hl std">rawXrates</span><span class="hl opt">$</span><span class="hl std">year</span> <span class="hl opt">+</span>
  <span class="hl std">(rawXrates</span><span class="hl opt">$</span><span class="hl std">month</span><span class="hl opt">-</span><span class="hl num">1</span><span class="hl std">)</span><span class="hl opt">/</span><span class="hl num">12</span>



<span class="hl com"># Eliminating rows and columns from data.frames</span>
<span class="hl com"># (= selection of subsets of data)</span>
<span class="hl com">################################################</span>

<span class="hl com"># Let's get rid of all data before 2000</span>

<span class="hl std">Xrates</span> <span class="hl kwb">=</span> <span class="hl std">rawXrates</span>

<span class="hl std">Xrates</span> <span class="hl kwb">=</span> <span class="hl std">Xrates[Xrates</span><span class="hl opt">$</span><span class="hl std">year</span><span class="hl opt">&gt;=</span><span class="hl num">2000</span><span class="hl std">, ]</span>

<span class="hl com"># Now you can see why we needed the dates in numerical format!</span>


<span class="hl com"># Next we get rid of other information we are not interested in...</span>
<span class="hl kwd">unique</span><span class="hl std">(Xrates</span><span class="hl opt">$</span><span class="hl std">D0)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] M0 M1
## Levels: M0 M1
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl std">Xrates</span> <span class="hl kwb">=</span> <span class="hl std">Xrates[Xrates</span><span class="hl opt">$</span><span class="hl std">D0</span> <span class="hl opt">==</span> <span class="hl str">&quot;M0&quot;</span><span class="hl std">, ]</span>

<span class="hl com"># Let's select only Euro exchange rates</span>

<span class="hl com"># How is the EUR coded? For a factor</span>
<span class="hl kwd">unique</span><span class="hl std">(Xrates</span><span class="hl opt">$</span><span class="hl std">D1)</span>
</pre></div>
<div class="output"><pre class="knitr r">##  [1] EUR1   GBP1   DKK100 NOK100 CZK100 HUF100 PLN100 RUB100 SEK100 TRY100
## [11] USD1   CAD1   ARS100 BRL100 MXN100 ZAR1   JPY100 AUD1   CNY100 HKD100
## [21] KRW100 MYR100 NZD1   SGD100 THB100 XDR1  
## 26 Levels: ARS100 AUD1 BRL100 CAD1 CNY100 CZK100 DKK100 EUR1 ... ZAR1
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com"># does sometimes not work so well. In that case, use</span>
<span class="hl kwd">levels</span><span class="hl std">(Xrates</span><span class="hl opt">$</span><span class="hl std">D1)</span>
</pre></div>
<div class="output"><pre class="knitr r">##  [1] &quot;ARS100&quot; &quot;AUD1&quot;   &quot;BRL100&quot; &quot;CAD1&quot;   &quot;CNY100&quot; &quot;CZK100&quot; &quot;DKK100&quot;
##  [8] &quot;EUR1&quot;   &quot;GBP1&quot;   &quot;HKD100&quot; &quot;HUF100&quot; &quot;JPY100&quot; &quot;KRW100&quot; &quot;MXN100&quot;
## [15] &quot;MYR100&quot; &quot;NOK100&quot; &quot;NZD1&quot;   &quot;PLN100&quot; &quot;RUB100&quot; &quot;SEK100&quot; &quot;SGD100&quot;
## [22] &quot;THB100&quot; &quot;TRY100&quot; &quot;USD1&quot;   &quot;XDR1&quot;   &quot;ZAR1&quot;
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl std">Xrates</span> <span class="hl kwb">=</span> <span class="hl std">Xrates[Xrates</span><span class="hl opt">$</span><span class="hl std">D1</span> <span class="hl opt">==</span> <span class="hl str">&quot;EUR1&quot;</span><span class="hl std">, ]</span>


<span class="hl kwd">plot</span><span class="hl std">(Xrates</span><span class="hl opt">$</span><span class="hl std">timeID, Xrates</span><span class="hl opt">$</span><span class="hl std">Value,</span>
     <span class="hl kwc">type</span> <span class="hl std">=</span> <span class="hl str">&quot;l&quot;</span><span class="hl std">,</span> <span class="hl kwc">col</span> <span class="hl std">=</span> <span class="hl str">&quot;red3&quot;</span><span class="hl std">)</span>
</pre></div>
</div><div class="rimage default"><img src="figure/unnamed-chunk-8-1.png" title="plot of chunk unnamed-chunk-8" alt="plot of chunk unnamed-chunk-8" class="plot" /></div><div class="rcode">
<div class="source"><pre class="knitr r"><span class="hl com"># You can also use the subset command</span>

<span class="hl std">XratesAlt</span> <span class="hl kwb">=</span> <span class="hl kwd">subset</span><span class="hl std">(rawXrates,</span>
      <span class="hl std">year</span> <span class="hl opt">&gt;=</span> <span class="hl num">2000</span> <span class="hl opt">&amp;</span> <span class="hl std">D0</span> <span class="hl opt">==</span> <span class="hl str">&quot;M0&quot;</span>  <span class="hl opt">&amp;</span> <span class="hl std">D1</span> <span class="hl opt">==</span> <span class="hl str">&quot;EUR1&quot;</span><span class="hl std">,</span>
       <span class="hl kwc">select</span> <span class="hl std">=</span> <span class="hl kwd">c</span><span class="hl std">(timeID, D1, Value))</span>

<span class="hl com"># And if we again converted the dates, we could select data &gt;= 2010</span>

<span class="hl com"># Remove objects we no longer need</span>

<span class="hl kwd">rm</span><span class="hl std">(long, wide, XratesAlt)</span>


<span class="hl com"># Analyze the correlation between the USD and EUR exchange rate</span>
<span class="hl com">###############################################################</span>



<span class="hl std">data</span> <span class="hl kwb">=</span> <span class="hl kwd">subset</span><span class="hl std">(rawXrates,</span>
        <span class="hl std">(D1</span> <span class="hl opt">==</span> <span class="hl str">&quot;EUR1&quot;</span> <span class="hl opt">|</span> <span class="hl std">D1</span> <span class="hl opt">==</span> <span class="hl str">&quot;USD1&quot;</span><span class="hl std">)</span> <span class="hl opt">&amp;</span>
          <span class="hl std">D0</span> <span class="hl opt">==</span> <span class="hl str">&quot;M0&quot;</span> <span class="hl opt">&amp;</span>
          <span class="hl std">timeID</span> <span class="hl opt">&gt;=</span> <span class="hl num">2000</span> <span class="hl std">,</span>
        <span class="hl kwc">select</span> <span class="hl std">=</span> <span class="hl kwd">c</span><span class="hl std">(</span><span class="hl str">&quot;timeID&quot;</span><span class="hl std">,</span> <span class="hl str">&quot;D1&quot;</span><span class="hl std">,</span> <span class="hl str">&quot;Value&quot;</span><span class="hl std">))</span>

<span class="hl com"># Bring data into wide format</span>
<span class="hl kwd">library</span><span class="hl std">(reshape2)</span>
<span class="hl std">data</span> <span class="hl kwb">=</span> <span class="hl kwd">dcast</span><span class="hl std">(data, timeID</span> <span class="hl opt">~</span> <span class="hl std">D1,</span> <span class="hl kwc">value.var</span> <span class="hl std">=</span> <span class="hl str">&quot;Value&quot;</span><span class="hl std">)</span>


<span class="hl com"># Make a plot</span>
<span class="hl kwd">matplot</span><span class="hl std">(data</span><span class="hl opt">$</span><span class="hl std">timeID,</span> <span class="hl kwd">cbind</span><span class="hl std">(data</span><span class="hl opt">$</span><span class="hl std">EUR1, data</span><span class="hl opt">$</span><span class="hl std">USD1),</span>
        <span class="hl kwc">type</span> <span class="hl std">=</span> <span class="hl str">&quot;l&quot;</span><span class="hl std">,</span> <span class="hl kwc">xlab</span> <span class="hl std">=</span> <span class="hl str">&quot;Time&quot;</span><span class="hl std">,</span> <span class="hl kwc">ylab</span> <span class="hl std">=</span> <span class="hl str">&quot;EUR, USD&quot;</span><span class="hl std">,</span> <span class="hl kwc">col</span> <span class="hl std">=</span> <span class="hl kwd">c</span><span class="hl std">(</span><span class="hl str">&quot;red3&quot;</span><span class="hl std">,</span> <span class="hl str">&quot;turquoise&quot;</span><span class="hl std">))</span>
<span class="hl kwd">grid</span><span class="hl std">()</span>
<span class="hl kwd">legend</span><span class="hl std">(</span><span class="hl str">'topright'</span><span class="hl std">,</span> <span class="hl kwc">inset</span><span class="hl std">=</span><span class="hl num">.05</span><span class="hl std">,</span> <span class="hl kwc">legend</span> <span class="hl std">=</span> <span class="hl kwd">c</span><span class="hl std">(</span><span class="hl str">&quot;EUR&quot;</span><span class="hl std">,</span> <span class="hl str">&quot;USD&quot;</span><span class="hl std">),</span>
       <span class="hl kwc">lty</span> <span class="hl std">=</span> <span class="hl num">1</span><span class="hl std">,</span> <span class="hl kwc">col</span> <span class="hl std">=</span> <span class="hl kwd">c</span><span class="hl std">(</span><span class="hl str">&quot;red3&quot;</span><span class="hl std">,</span> <span class="hl str">&quot;turquoise&quot;</span><span class="hl std">))</span>
</pre></div>
</div><div class="rimage default"><img src="figure/unnamed-chunk-8-2.png" title="plot of chunk unnamed-chunk-8" alt="plot of chunk unnamed-chunk-8" class="plot" /></div><div class="rcode">
<div class="source"><pre class="knitr r"><span class="hl com"># Correlation</span>
<span class="hl kwd">cor</span><span class="hl std">(data</span><span class="hl opt">$</span><span class="hl std">EUR1, data</span><span class="hl opt">$</span><span class="hl std">USD1)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] 0.6299145
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com"># Run a regression</span>
<span class="hl std">reg0</span> <span class="hl kwb">=</span> <span class="hl kwd">lm</span><span class="hl std">(data</span><span class="hl opt">$</span><span class="hl std">USD1</span> <span class="hl opt">~</span> <span class="hl std">data</span><span class="hl opt">$</span><span class="hl std">EUR1)</span>
<span class="hl kwd">summary</span><span class="hl std">(reg0)</span>
</pre></div>
<div class="output"><pre class="knitr r">## 
## Call:
## lm(formula = data$USD1 ~ data$EUR1)
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -0.34302 -0.12688 -0.06599  0.08268  0.49984 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept) -0.08376    0.11153  -0.751    0.454    
## data$EUR1    0.89761    0.07845  11.441   &lt;2e-16 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 0.2024 on 199 degrees of freedom
## Multiple R-squared:  0.3968,	Adjusted R-squared:  0.3938 
## F-statistic: 130.9 on 1 and 199 DF,  p-value: &lt; 2.2e-16
</pre></div>
</div></div>


<!-- ####################################################### -->



<h1 id="lecture6">Lecture 6</h1>

<h2 id="lecture5_homesolution" class="noBackToTop">Solution of Home Assignment for Lecture 5</h2>

<p>The suggested solution for the home assignment of Lecture 5 is as shown below.</p>

<div class="chunk" id="unnamed-chunk-9"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl com">######################</span>
<span class="hl com"># Homework Lecture 5 #</span>
<span class="hl com">######################</span>

<span class="hl kwd">rm</span><span class="hl std">(</span><span class="hl kwc">list</span> <span class="hl std">=</span> <span class="hl kwd">ls</span><span class="hl std">())</span>

<span class="hl com"># SET YOUR WORKING DIRECTORY</span>
<span class="hl kwd">setwd</span><span class="hl std">(</span><span class="hl str">&quot;D:/Dropbox/Mac&amp;Surf/Programmierkurs Dropb/Data&quot;</span><span class="hl std">)</span>

<span class="hl std">data</span> <span class="hl kwb">=</span> <span class="hl kwd">read.csv</span><span class="hl std">(</span><span class="hl str">&quot;MEI_20102016213925096.csv&quot;</span><span class="hl std">,</span> <span class="hl kwc">header</span> <span class="hl std">=</span> <span class="hl num">TRUE</span><span class="hl std">)</span>

<span class="hl com"># Get first column names, country and variable names</span>
<span class="hl kwd">names</span><span class="hl std">(data)</span>
</pre></div>
<div class="output"><pre class="knitr r">##  [1] &quot;Ã¯..LOCATION&quot;           &quot;Country&quot;              
##  [3] &quot;SUBJECT&quot;               &quot;Subject&quot;              
##  [5] &quot;MEASURE&quot;               &quot;Measure&quot;              
##  [7] &quot;FREQUENCY&quot;             &quot;Frequency&quot;            
##  [9] &quot;TIME&quot;                  &quot;Time&quot;                 
## [11] &quot;Unit.Code&quot;             &quot;Unit&quot;                 
## [13] &quot;PowerCode.Code&quot;        &quot;PowerCode&quot;            
## [15] &quot;Reference.Period.Code&quot; &quot;Reference.Period&quot;     
## [17] &quot;Value&quot;                 &quot;Flag.Codes&quot;           
## [19] &quot;Flags&quot;
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">unique</span><span class="hl std">(data</span><span class="hl opt">$</span><span class="hl std">Country)</span>
</pre></div>
<div class="output"><pre class="knitr r">##  [1] Greece                       Japan                       
##  [3] Chile                        Australia                   
##  [5] Belgium                      Czech Republic              
##  [7] Germany                      Switzerland                 
##  [9] South Africa                 Denmark                     
## [11] Mexico                       Turkey                      
## [13] Finland                      Netherlands                 
## [15] Sweden                       United Kingdom              
## [17] France                       Austria                     
## [19] Italy                        Portugal                    
## [21] Brazil                       Russia                      
## [23] Slovenia                     Hungary                     
## [25] Norway                       Poland                      
## [27] Canada                       Korea                       
## [29] New Zealand                  Slovak Republic             
## [31] United States                Israel                      
## [33] Spain                        Estonia                     
## [35] Indonesia                    Ireland                     
## [37] India                        Luxembourg                  
## [39] Four Big European            China (People's Republic of)
## [41] OECD + Major Six NME         Major Five Asia             
## [43] NAFTA                        OECD - Europe               
## [45] G7                           OECD - Total                
## [47] Euro area (19 countries)    
## 47 Levels: Australia Austria Belgium Brazil Canada ... United States
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">unique</span><span class="hl std">(data</span><span class="hl opt">$</span><span class="hl std">Subject)</span>
</pre></div>
<div class="output"><pre class="knitr r">##  [1] Leading Indicators OECD &gt; Component series &gt; Bank activity &gt; Normalised                        
##  [2] Leading Indicators OECD &gt; Component series &gt; Bank activity &gt; Original series                   
##  [3] Leading Indicators OECD &gt; Component series &gt; BTS - Sales expectations &gt; Normalised             
##  [4] Leading Indicators OECD &gt; Component series &gt; BTS - Sales expectations &gt; Original series        
##  [5] Leading Indicators OECD &gt; Component series &gt; BTS - Demand or orders inflow &gt; Normalised        
##  [6] Leading Indicators OECD &gt; Component series &gt; BTS - Demand or orders inflow &gt; Original series   
##  [7] Leading Indicators OECD &gt; Component series &gt; BTS - Employment &gt; Normalised                     
##  [8] Leading Indicators OECD &gt; Component series &gt; BTS - Employment &gt; Original series                
##  [9] Leading Indicators OECD &gt; Component series &gt; BTS - Finished goods stocks &gt; Normalised          
## [10] Leading Indicators OECD &gt; Component series &gt; BTS - Finished goods stocks &gt; Original series     
## [11] Leading Indicators OECD &gt; Component series &gt; BTS - Prices expectations &gt; Normalised            
## [12] Leading Indicators OECD &gt; Component series &gt; BTS - Prices expectations &gt; Original series       
## [13] Leading Indicators OECD &gt; Component series &gt; BTS - Order books &gt; Normalised                    
## [14] Leading Indicators OECD &gt; Component series &gt; BTS - Order books &gt; Original series               
## [15] Leading Indicators OECD &gt; Component series &gt; BTS - Production &gt; Normalised                     
## [16] Leading Indicators OECD &gt; Component series &gt; BTS - Production &gt; Original series                
## [17] Leading Indicators OECD &gt; Component series &gt; BTS - Business situation &gt; Normalised             
## [18] Leading Indicators OECD &gt; Component series &gt; BTS - Business situation &gt; Original series        
## [19] Leading Indicators OECD &gt; Component series &gt; BTS - Capacity utilization &gt; Normalised           
## [20] Leading Indicators OECD &gt; Component series &gt; BTS - Capacity utilization &gt; Original series      
## [21] Leading Indicators OECD &gt; Component series &gt; BTS - Export orders &gt; Normalised                  
## [22] Leading Indicators OECD &gt; Component series &gt; BTS - Export orders &gt; Original series             
## [23] Leading Indicators OECD &gt; Component series &gt; CS - Confidence indicator &gt; Normalised            
## [24] Leading Indicators OECD &gt; Component series &gt; CS - Confidence indicator &gt; Original series       
## [25] Leading Indicators OECD &gt; Component series &gt; Construction &gt; Normalised                         
## [26] Leading Indicators OECD &gt; Component series &gt; Construction &gt; Original series                    
## [27] Leading Indicators OECD &gt; Component series &gt; Employment - Unemployment &gt; Normalised            
## [28] Leading Indicators OECD &gt; Component series &gt; Employment - Unemployment &gt; Original series       
## [29] Leading Indicators OECD &gt; Component series &gt; Currency conversion &gt; Normalised                  
## [30] Leading Indicators OECD &gt; Component series &gt; Currency conversion &gt; Original series             
## [31] Leading Indicators OECD &gt; Component series &gt; Hours &gt; Normalised                                
## [32] Leading Indicators OECD &gt; Component series &gt; Hours &gt; Original series                           
## [33] Leading Indicators OECD &gt; Component series &gt; Inventories to shipments &gt; Normalised             
## [34] Leading Indicators OECD &gt; Component series &gt; Inventories to shipments &gt; Original series        
## [35] Leading Indicators OECD &gt; Component series &gt; Long-term interest rate &gt; Normalised              
## [36] Leading Indicators OECD &gt; Component series &gt; Long-term interest rate &gt; Original series         
## [37] Leading Indicators OECD &gt; Component series &gt; Monetary Aggregates &gt; Normalised                  
## [38] Leading Indicators OECD &gt; Component series &gt; Monetary Aggregates &gt; Original series             
## [39] Leading Indicators OECD &gt; Component series &gt; Imports of goods &gt; Normalised                     
## [40] Leading Indicators OECD &gt; Component series &gt; Net trade &gt; Normalised                            
## [41] Leading Indicators OECD &gt; Component series &gt; Net trade &gt; Original series                       
## [42] Leading Indicators OECD &gt; Component series &gt; Orders &gt; Normalised                               
## [43] Leading Indicators OECD &gt; Component series &gt; Orders &gt; Original series                          
## [44] Leading Indicators OECD &gt; Component series &gt; Production - Basic metals &gt; Normalised            
## [45] Leading Indicators OECD &gt; Component series &gt; Production - Basic metals &gt; Original series       
## [46] Leading Indicators OECD &gt; Component series &gt; Consumer prices &gt; Normalised                      
## [47] Leading Indicators OECD &gt; Component series &gt; Consumer prices &gt; Original series                 
## [48] Leading Indicators OECD &gt; Component series &gt; Production - Electricity &gt; Normalised             
## [49] Leading Indicators OECD &gt; Component series &gt; Production - Electricity &gt; Original series        
## [50] Leading Indicators OECD &gt; Component series &gt; Production - Goods &gt; Normalised                   
## [51] Leading Indicators OECD &gt; Component series &gt; Production - Goods &gt; Original series              
## [52] Leading Indicators OECD &gt; Component series &gt; Production - Non metallic &gt; Normalised            
## [53] Leading Indicators OECD &gt; Component series &gt; Producer prices &gt; Normalised                      
## [54] Leading Indicators OECD &gt; Component series &gt; Producer prices &gt; Original series                 
## [55] Leading Indicators OECD &gt; Component series &gt; Production - Mining and quarrying &gt; Normalised    
## [56] Leading Indicators OECD &gt; Component series &gt; Interest rate spread &gt; Normalised                 
## [57] Leading Indicators OECD &gt; Component series &gt; Interest rate spread &gt; Original series            
## [58] Leading Indicators OECD &gt; Component series &gt; Stocks &gt; Normalised                               
## [59] Leading Indicators OECD &gt; Component series &gt; Stocks &gt; Original series                          
## [60] Leading Indicators OECD &gt; Component series &gt; Sales &gt; Normalised                                
## [61] Leading Indicators OECD &gt; Component series &gt; Sales &gt; Original series                           
## [62] Leading Indicators OECD &gt; Component series &gt; Share prices &gt; Normalised                         
## [63] Leading Indicators OECD &gt; Component series &gt; Share prices &gt; Original series                    
## [64] Leading Indicators OECD &gt; Component series &gt; Short-term interest rate &gt; Normalised             
## [65] Leading Indicators OECD &gt; Component series &gt; Short-term interest rate &gt; Original series        
## [66] Leading Indicators OECD &gt; Component series &gt; Tourism activity &gt; Normalised                     
## [67] Leading Indicators OECD &gt; Component series &gt; Tourism activity &gt; Original series                
## [68] Leading Indicators OECD &gt; Component series &gt; Imports &gt; Normalised                              
## [69] Leading Indicators OECD &gt; Component series &gt; Terms of trade &gt; Normalised                       
## [70] Leading Indicators OECD &gt; Component series &gt; Terms of trade &gt; Original series                  
## [71] Leading Indicators OECD &gt; Component series &gt; Exports &gt; Normalised                              
## [72] Leading Indicators OECD &gt; Component series &gt; Exports &gt; Original series                         
## [73] Leading Indicators OECD &gt; Component series &gt; Car registration - sales &gt; Normalised             
## [74] Leading Indicators OECD &gt; Component series &gt; Car registration - sales &gt; Original series        
## [75] Leading Indicators OECD &gt; Component series &gt; Exports of goods &gt; Normalised                     
## [76] Leading Indicators OECD &gt; Component series &gt; Exports of goods &gt; Original series                
## [77] Leading Indicators OECD &gt; Leading indicators &gt; CLI &gt; Amplitude adjusted                        
## [78] Leading Indicators OECD &gt; Leading indicators &gt; CLI &gt; Normalised                                
## [79] Leading Indicators OECD &gt; Leading indicators &gt; CLI &gt; Trend restored                            
## [80] Leading Indicators OECD &gt; Component series &gt; BTS - Stocks of orders &gt; Normalised               
## [81] Leading Indicators OECD &gt; Component series &gt; BTS - Stocks of orders &gt; Original series          
## [82] Leading Indicators OECD &gt; Component series &gt; CS - Expected economic situation &gt; Normalised     
## [83] Leading Indicators OECD &gt; Component series &gt; CS - Expected economic situation &gt; Original series
## [84] Leading Indicators OECD &gt; Reference series &gt; Gross Domestic Product (GDP) &gt; Normalised         
## [85] Leading Indicators OECD &gt; Reference series &gt; Gross Domestic Product (GDP) &gt; Original series    
## [86] Leading Indicators OECD &gt; Reference series &gt; Gross Domestic Product (GDP) &gt; Ratio to trend     
## [87] Leading Indicators OECD &gt; Reference series &gt; Gross Domestic Product (GDP) &gt; Trend              
## 87 Levels: Leading Indicators OECD &gt; Component series &gt; Bank activity &gt; Normalised ...
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com"># Use subset to get a restricted data set</span>
<span class="hl std">x</span> <span class="hl kwb">=</span> <span class="hl kwd">subset</span><span class="hl std">(data, (Country</span> <span class="hl opt">==</span> <span class="hl str">&quot;Switzerland&quot;</span> <span class="hl opt">|</span>  <span class="hl std">Country</span> <span class="hl opt">==</span> <span class="hl str">&quot;Germany&quot;</span> <span class="hl opt">|</span>
             <span class="hl std">Country</span> <span class="hl opt">==</span> <span class="hl str">&quot;OECD - Total&quot;</span><span class="hl std">)</span> <span class="hl opt">&amp;</span> <span class="hl std">Frequency</span> <span class="hl opt">==</span> <span class="hl str">&quot;Monthly&quot;</span><span class="hl std">,</span>
           <span class="hl kwc">select</span> <span class="hl std">=</span> <span class="hl kwd">c</span><span class="hl std">(</span><span class="hl str">&quot;TIME&quot;</span><span class="hl std">,</span> <span class="hl str">&quot;Country&quot;</span><span class="hl std">,</span> <span class="hl str">&quot;Subject&quot;</span><span class="hl std">,</span> <span class="hl str">&quot;Value&quot;</span><span class="hl std">))</span>

<span class="hl com"># The leading indicators series has a very complicated name</span>
<span class="hl com"># So, instead of typing it, let's just attach a variable to</span>
<span class="hl com"># it called series using the following trick:</span>
<span class="hl std">series</span> <span class="hl kwb">=</span> <span class="hl kwd">unique</span><span class="hl std">(x</span><span class="hl opt">$</span><span class="hl std">Subject)[</span><span class="hl num">25</span><span class="hl std">]</span>

<span class="hl std">series</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] Leading Indicators OECD &gt; Reference series &gt; Gross Domestic Product (GDP) &gt; Trend
## 87 Levels: Leading Indicators OECD &gt; Component series &gt; Bank activity &gt; Normalised ...
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com"># Select the rows that correspond to that series</span>
<span class="hl std">x</span> <span class="hl kwb">=</span> <span class="hl std">x[x</span><span class="hl opt">$</span><span class="hl std">Subject</span> <span class="hl opt">==</span> <span class="hl std">series, ]</span>

<span class="hl com"># Convert to wide format</span>
<span class="hl std">xWide</span> <span class="hl kwb">=</span> <span class="hl kwd">dcast</span><span class="hl std">(x, TIME</span> <span class="hl opt">~</span> <span class="hl std">Country,</span> <span class="hl kwc">value.var</span> <span class="hl std">=</span> <span class="hl str">&quot;Value&quot;</span><span class="hl std">)</span>

<span class="hl std">xWide</span>
</pre></div>
<div class="output"><pre class="knitr r">##      TIME  Germany OECD - Total Switzerland
## 1 2016-01 109.0055     109.5743    108.7494
## 2 2016-02 109.1387     109.7416    108.8790
## 3 2016-03 109.2720     109.9092    109.0088
## 4 2016-04 109.4056     110.0713    109.1388
## 5 2016-05 109.5393     110.2337    109.2689
## 6 2016-06 109.6732     110.3964    109.3992
</pre></div>
</div></div>






<h2 id="lecture6_regression">A Very Brief Introduction into Regression Analysis</h2>


<object width="1200" height="880" data="pdfs/Regression intro.pdf"></object>





<h2 id="lecture6_codelive" >&ldquo;Live&rdquo; Code from Lecture 6</h2>

<p>If you prefer the &ldquo;live&rdquo; code as pdf, you can get it <a href="pdfs/Lec6_live.pdf" target = "_blank">here</a>.</p>


<div class="chunk" id="unnamed-chunk-10"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl com">#############################################</span>
<span class="hl com">#      LECTURE 6: Data analysis             #</span>
<span class="hl com">#############################################</span>

<span class="hl com"># We will first go through (almost) the same steps as in </span>
<span class="hl com"># Lecture 5. This time, we will organize the code in a more</span>
<span class="hl com"># efficient way, such that it becomes more &quot;reusable&quot;</span>
<span class="hl com"># You will also learn how to merge two data sets.</span>
<span class="hl com"># The most important thing today are scatter plots</span>
<span class="hl com"># and regression analysis. These are key tools for</span>
<span class="hl com"># data analysis.</span>

<span class="hl kwd">rm</span><span class="hl std">(</span><span class="hl kwc">list</span> <span class="hl std">=</span> <span class="hl kwd">ls</span><span class="hl std">())</span> <span class="hl com"># Empty workspace to start with a &quot;clean sheet&quot;</span>

<span class="hl com"># REPLACE THE WORKING DIRECTORY BELOW WITH THE ONE FOR YOUR DEVICE</span>
<span class="hl kwd">setwd</span><span class="hl std">(</span><span class="hl str">&quot;D:/Dropbox/Mac&amp;Surf/Programmierkurs Dropb/Data&quot;</span><span class="hl std">)</span>
<span class="hl com">#load(&quot;rawExpImp (1).RData&quot;)</span>

<span class="hl com"># Read files, adjust file names to your situation!</span>

<span class="hl std">rawXrates</span> <span class="hl kwb">=</span> <span class="hl kwd">read.csv</span><span class="hl std">(</span><span class="hl kwc">file</span> <span class="hl std">=</span>
   <span class="hl str">&quot;SNB Xrates downloaded clean noEmptyCol.csv&quot;</span><span class="hl std">)</span>

<span class="hl std">rawAussen</span> <span class="hl kwb">=</span> <span class="hl kwd">read.csv</span><span class="hl std">(</span><span class="hl kwc">file</span> <span class="hl std">=</span>
    <span class="hl str">&quot;SNB Aussenhandel downloaded clean noEmptyCol.csv&quot;</span><span class="hl std">)</span>

<span class="hl com"># If you are having troubles with the data, use the following</span>

<span class="hl com"># load(&quot;rawXrates.RData&quot;)</span>
<span class="hl com"># load(&quot;rawExpImp.RData&quot;)</span>

<span class="hl com"># You get these data from the online script on</span>
<span class="hl com"># https://binswanger.github.io/practicaldata_hs16/#Problems--What-if-some-numbers-are-automatically-converted-to-dates-</span>
<span class="hl com"># Put these files in your working directory</span>

<span class="hl com"># SET PARAMETERS HERE!</span>
<span class="hl com">######################</span>

<span class="hl std">startYear</span> <span class="hl kwb">=</span> <span class="hl num">2000</span>
<span class="hl std">curr</span> <span class="hl kwb">=</span> <span class="hl str">&quot;USD1&quot;</span>
<span class="hl std">tradeDir</span> <span class="hl kwb">=</span> <span class="hl str">&quot;A&quot;</span>  <span class="hl com"># Direction of trade</span>
                <span class="hl com"># Values are E (Einfuhr) </span>
                <span class="hl com"># and A (Ausfuhr)</span>
                <span class="hl com"># run unique(rawAussen$D0) for overview</span>
<span class="hl std">goodsType</span> <span class="hl kwb">=</span> <span class="hl str">&quot;MAE&quot;</span> <span class="hl com"># run unique(rawAussen$D1)</span>

<span class="hl std">measure</span> <span class="hl kwb">=</span> <span class="hl str">&quot;R&quot;</span> <span class="hl com"># run unique(rawAussen$D2)</span>


<span class="hl kwd">unique</span><span class="hl std">(rawAussen</span><span class="hl opt">$</span><span class="hl std">D0)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] E A H
## Levels: A E H
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">unique</span><span class="hl std">(rawAussen</span><span class="hl opt">$</span><span class="hl std">D1)</span>
</pre></div>
<div class="output"><pre class="knitr r">##  [1] T    MAE  PUB  C    TBS0 F    M    U    P    TBS1
## Levels: C F M MAE P PUB T TBS0 TBS1 U
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">unique</span><span class="hl std">(rawAussen</span><span class="hl opt">$</span><span class="hl std">D2)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] WMF N   R  
## Levels: N R WMF
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com"># Functions</span>
<span class="hl com">###########</span>


<span class="hl std">toGrowth</span> <span class="hl kwb">=</span> <span class="hl kwa">function</span><span class="hl std">(</span><span class="hl kwc">x</span><span class="hl std">){</span>
  <span class="hl std">out</span> <span class="hl kwb">=</span> <span class="hl std">(</span><span class="hl kwd">tail</span><span class="hl std">(x,</span> <span class="hl opt">-</span><span class="hl num">1</span><span class="hl std">)</span><span class="hl opt">/</span><span class="hl kwd">head</span><span class="hl std">(x,</span> <span class="hl opt">-</span><span class="hl num">1</span><span class="hl std">)</span> <span class="hl opt">-</span><span class="hl num">1</span> <span class="hl std">)</span><span class="hl opt">*</span><span class="hl num">100</span>
  <span class="hl com"># This is one element shorter than input, </span>
  <span class="hl com"># add an NA as first value</span>
  <span class="hl std">out</span> <span class="hl kwb">=</span> <span class="hl kwd">c</span><span class="hl std">(</span><span class="hl num">NA</span><span class="hl std">, out)</span>
  <span class="hl kwd">return</span><span class="hl std">(out)</span>
<span class="hl std">}</span>



<span class="hl com"># Customize the data</span>
<span class="hl com">####################</span>

<span class="hl com"># A unique time identifier for BOTH data</span>
<span class="hl kwd">library</span><span class="hl std">(stringr)</span>

<span class="hl std">rawXrates</span><span class="hl opt">$</span><span class="hl std">year</span> <span class="hl kwb">=</span> <span class="hl kwd">as.numeric</span><span class="hl std">(</span>
  <span class="hl kwd">substr</span><span class="hl std">(rawXrates</span><span class="hl opt">$</span><span class="hl std">Date,</span> <span class="hl kwc">start</span> <span class="hl std">=</span> <span class="hl num">1</span><span class="hl std">,</span> <span class="hl kwc">stop</span> <span class="hl std">=</span> <span class="hl num">4</span><span class="hl std">)  )</span>

<span class="hl std">rawXrates</span><span class="hl opt">$</span><span class="hl std">month</span> <span class="hl kwb">=</span> <span class="hl kwd">as.numeric</span><span class="hl std">(</span>
  <span class="hl kwd">substr</span><span class="hl std">(rawXrates</span><span class="hl opt">$</span><span class="hl std">Date,</span> <span class="hl kwc">start</span> <span class="hl std">=</span> <span class="hl num">6</span><span class="hl std">,</span> <span class="hl kwc">stop</span> <span class="hl std">=</span> <span class="hl num">7</span><span class="hl std">)  )</span>

<span class="hl std">rawXrates</span><span class="hl opt">$</span><span class="hl std">timeID</span> <span class="hl kwb">=</span> <span class="hl std">rawXrates</span><span class="hl opt">$</span><span class="hl std">year</span> <span class="hl opt">+</span>
  <span class="hl std">(rawXrates</span><span class="hl opt">$</span><span class="hl std">month</span><span class="hl opt">-</span><span class="hl num">1</span><span class="hl std">)</span><span class="hl opt">/</span><span class="hl num">12</span>


<span class="hl std">rawAussen</span><span class="hl opt">$</span><span class="hl std">year</span> <span class="hl kwb">=</span> <span class="hl kwd">as.numeric</span><span class="hl std">(</span>
  <span class="hl kwd">substr</span><span class="hl std">(rawAussen</span><span class="hl opt">$</span><span class="hl std">Date,</span> <span class="hl kwc">start</span> <span class="hl std">=</span> <span class="hl num">1</span><span class="hl std">,</span> <span class="hl kwc">stop</span> <span class="hl std">=</span> <span class="hl num">4</span><span class="hl std">)  )</span>

<span class="hl std">rawAussen</span><span class="hl opt">$</span><span class="hl std">month</span> <span class="hl kwb">=</span> <span class="hl kwd">as.numeric</span><span class="hl std">(</span>
  <span class="hl kwd">substr</span><span class="hl std">(rawAussen</span><span class="hl opt">$</span><span class="hl std">Date,</span> <span class="hl kwc">start</span> <span class="hl std">=</span> <span class="hl num">6</span><span class="hl std">,</span> <span class="hl kwc">stop</span> <span class="hl std">=</span> <span class="hl num">7</span><span class="hl std">)  )</span>

<span class="hl std">rawAussen</span><span class="hl opt">$</span><span class="hl std">timeID</span> <span class="hl kwb">=</span> <span class="hl std">rawAussen</span><span class="hl opt">$</span><span class="hl std">year</span> <span class="hl opt">+</span>
  <span class="hl std">(rawAussen</span><span class="hl opt">$</span><span class="hl std">month</span><span class="hl opt">-</span><span class="hl num">1</span><span class="hl std">)</span><span class="hl opt">/</span><span class="hl num">12</span>



<span class="hl std">xrates</span> <span class="hl kwb">=</span> <span class="hl kwd">subset</span><span class="hl std">(rawXrates,</span>
        <span class="hl std">D1</span> <span class="hl opt">==</span> <span class="hl std">curr</span> <span class="hl opt">&amp;</span>  <span class="hl com"># NOTE the apparance of the VARIABLE xrate!!!</span>
           <span class="hl std">D0</span> <span class="hl opt">==</span> <span class="hl str">&quot;M0&quot;</span> <span class="hl opt">&amp;</span>
          <span class="hl std">timeID</span> <span class="hl opt">&gt;=</span> <span class="hl std">startYear ,</span> <span class="hl com"># NOTE the apparance of the VARIABLE startYear!!!</span>
        <span class="hl kwc">select</span> <span class="hl std">=</span> <span class="hl kwd">c</span><span class="hl std">(</span><span class="hl str">&quot;timeID&quot;</span><span class="hl std">,</span> <span class="hl str">&quot;D1&quot;</span><span class="hl std">,</span> <span class="hl str">&quot;Value&quot;</span><span class="hl std">))</span>

<span class="hl std">aussen</span> <span class="hl kwb">=</span>
  <span class="hl kwd">subset</span><span class="hl std">(rawAussen,</span>

         <span class="hl std">D0</span> <span class="hl opt">==</span> <span class="hl std">tradeDir</span>  <span class="hl opt">&amp;</span>
         <span class="hl std">D1</span> <span class="hl opt">==</span> <span class="hl std">goodsType</span> <span class="hl opt">&amp;</span>
         <span class="hl std">D2</span> <span class="hl opt">==</span> <span class="hl std">measure</span>   <span class="hl opt">&amp;</span>
         <span class="hl std">timeID</span> <span class="hl opt">&gt;=</span> <span class="hl std">startYear ,</span>

         <span class="hl kwc">select</span> <span class="hl std">=</span> <span class="hl kwd">c</span><span class="hl std">(</span><span class="hl str">&quot;timeID&quot;</span><span class="hl std">,</span> <span class="hl str">&quot;D0&quot;</span><span class="hl std">,</span><span class="hl str">&quot;D1&quot;</span><span class="hl std">,</span><span class="hl str">&quot;D2&quot;</span><span class="hl std">,</span> <span class="hl str">&quot;Value&quot;</span><span class="hl std">))</span>


<span class="hl com"># Bring data into wide format</span>
<span class="hl kwd">library</span><span class="hl std">(reshape2)</span>
<span class="hl std">xrates</span> <span class="hl kwb">=</span> <span class="hl kwd">dcast</span><span class="hl std">(xrates, timeID</span> <span class="hl opt">~</span> <span class="hl std">D1,</span> <span class="hl kwc">value.var</span> <span class="hl std">=</span> <span class="hl str">&quot;Value&quot;</span><span class="hl std">)</span>

<span class="hl std">aussen</span> <span class="hl kwb">=</span> <span class="hl kwd">dcast</span><span class="hl std">(aussen, timeID</span> <span class="hl opt">~</span> <span class="hl std">D0</span> <span class="hl opt">+</span> <span class="hl std">D1</span> <span class="hl opt">+</span> <span class="hl std">D2,</span> <span class="hl kwc">value.var</span> <span class="hl std">=</span> <span class="hl str">&quot;Value&quot;</span><span class="hl std">)</span>

<span class="hl com"># Merge the two data sets (NEW!!!!)</span>
<span class="hl com"># DA stands for &quot;Data for Analysis&quot;</span>
<span class="hl std">DA</span> <span class="hl kwb">=</span> <span class="hl kwd">merge</span><span class="hl std">(xrates, aussen,</span> <span class="hl kwc">by</span> <span class="hl std">=</span> <span class="hl str">&quot;timeID&quot;</span><span class="hl std">)</span>
<span class="hl com"># The &quot;by&quot; argument contains the so-called &quot;key&quot;.</span>


<span class="hl com"># [FOR LATER] convert to growth rates</span>
<span class="hl std">DA[[curr]]</span> <span class="hl kwb">=</span> <span class="hl kwd">toGrowth</span><span class="hl std">(DA[[curr]])</span>


<span class="hl com"># ANALYSIS</span>
<span class="hl com">###########</span>

<span class="hl com"># Variable name for exports/imports</span>
<span class="hl kwd">names</span><span class="hl std">(DA)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] &quot;timeID&quot;  &quot;USD1&quot;    &quot;A_MAE_R&quot;
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl std">vn</span> <span class="hl kwb">=</span> <span class="hl kwd">paste</span><span class="hl std">(tradeDir, goodsType, measure,</span> <span class="hl kwc">sep</span> <span class="hl std">=</span> <span class="hl str">&quot;_&quot;</span><span class="hl std">)</span>



<span class="hl com"># Make a plot</span>
<span class="hl kwd">plot</span><span class="hl std">(DA[[curr]], DA[[vn]],</span>
        <span class="hl com"># NOTE: This code works for all types of export/import</span>
        <span class="hl com"># data and exchange rates!!! They are captured in the </span>
        <span class="hl com"># variable names</span>

        <span class="hl kwc">pch</span> <span class="hl std">=</span> <span class="hl num">16</span><span class="hl std">,</span> <span class="hl com"># data points as dots; google &quot;r plot pch&quot;</span>

        <span class="hl kwc">cex</span> <span class="hl std">=</span> <span class="hl num">.7</span><span class="hl std">,</span> <span class="hl com"># the size of the point (exam question from last semester :-)</span>

        <span class="hl kwc">xlab</span> <span class="hl std">= curr,</span> <span class="hl kwc">ylab</span> <span class="hl std">= vn,</span> <span class="hl com"># axis labels</span>

        <span class="hl kwc">col</span> <span class="hl std">=</span> <span class="hl kwd">c</span><span class="hl std">(</span><span class="hl str">&quot;turquoise&quot;</span><span class="hl std">)</span> <span class="hl com"># color of dots</span>

     <span class="hl std">)</span>  <span class="hl com"># The closing paranthesis</span>

<span class="hl com"># Add a regression line</span>

<span class="hl kwd">abline</span><span class="hl std">(</span>  <span class="hl kwd">lm</span><span class="hl std">(DA[[vn]]</span>  <span class="hl opt">~</span>   <span class="hl std">DA[[curr]]</span>
          <span class="hl std">),</span> <span class="hl kwc">col</span><span class="hl std">=</span><span class="hl str">&quot;red3&quot;</span><span class="hl std">,</span> <span class="hl kwc">lwd</span> <span class="hl std">=</span> <span class="hl num">3</span><span class="hl std">)</span>
</pre></div>
</div><div class="rimage default"><img src="figure/unnamed-chunk-10-1.png" title="plot of chunk unnamed-chunk-10" alt="plot of chunk unnamed-chunk-10" class="plot" /></div><div class="rcode">
<div class="source"><pre class="knitr r"><span class="hl com"># Run a regression</span>
<span class="hl std">reg</span> <span class="hl kwb">=</span> <span class="hl kwd">lm</span><span class="hl std">(DA[[vn]]</span><span class="hl opt">~</span><span class="hl std">DA[[curr]])</span>
<span class="hl kwd">summary</span><span class="hl std">(reg)</span>
</pre></div>
<div class="output"><pre class="knitr r">## 
## Call:
## lm(formula = DA[[vn]] ~ DA[[curr]])
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -30.103  -6.448  -1.142   8.119  36.618 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)
## (Intercept)   0.5077     0.8411   0.604    0.547
## DA[[curr]]    0.1707     0.3372   0.506    0.613
## 
## Residual standard error: 11.79 on 196 degrees of freedom
##   (1 observation deleted due to missingness)
## Multiple R-squared:  0.001307,	Adjusted R-squared:  -0.003789 
## F-statistic: 0.2564 on 1 and 196 DF,  p-value: 0.6131
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com"># How calculate changes?</span>

<span class="hl std">test</span> <span class="hl kwb">=</span> <span class="hl num">1</span><span class="hl opt">:</span><span class="hl num">10</span>
<span class="hl kwd">head</span><span class="hl std">(test,</span> <span class="hl opt">-</span><span class="hl num">1</span><span class="hl std">)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] 1 2 3 4 5 6 7 8 9
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">tail</span><span class="hl std">(test,</span> <span class="hl opt">-</span><span class="hl num">1</span><span class="hl std">)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1]  2  3  4  5  6  7  8  9 10
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl std">dTest</span> <span class="hl kwb">=</span> <span class="hl std">(</span><span class="hl kwd">tail</span><span class="hl std">(test,</span> <span class="hl opt">-</span><span class="hl num">1</span><span class="hl std">)</span><span class="hl opt">/</span><span class="hl kwd">head</span><span class="hl std">(test,</span> <span class="hl opt">-</span><span class="hl num">1</span><span class="hl std">)</span> <span class="hl opt">-</span><span class="hl num">1</span><span class="hl std">)</span><span class="hl opt">*</span><span class="hl num">100</span>
</pre></div>
</div></div>






<h1 id="lecture7">Lecture 7</h1>

<h2 id="lecture7-intro" class="noBackToTop">Introductory remark</h2>


<p>Up to now, you have seen the most important concepts used for analyzing data with R. You have seen many data types, you have seen conditional statements, loops, and, very importantly, functions. You have also learned how to manipulate data frames, and you saw how to produce graphs. You even know how to run regressions and add regression lines to scatter plots.</p>

<p>For the coming lectures, we will focus more on the documentation process of data analysis. We may produce hundreds of graphs and regressions, and we want a format that is convenient for inspecting the results. Moreover, it is the most common thing when analyzing data that you change your mind. You change the definition of your variables, or you want to change the title in your graph etc. etc. Now, if you have produced 300 graphs and regression results, you certainly don't feel like manually going through all of them again and changing them. It would be better to change three lines of code, press a button, and all the 300 graphs, their titles, and the regression tables are spit out according to your new idea. That would be pretty cool! And that's what we want to work on now.</p>


<h2 id="latex" >RMarkdown and Latex</h2>

<p>RStudio has integrated a terrific tool that will achieve this miracle: RMarkdown. In Order to use it, you have install the <code>rmarkdown</code> package and, possibly, also Latex. How this is done is explained in detail in an <a href = "pdfs/RMarkdown&Latex.pdf" target = "_blank">extra document</a>.</p>



<h2 id="lecture7_codelive" >&ldquo;Live&rdquo; Code from Lecture 7</h2>

<p>Get &ldquo;live&rdquo; code as <a href="pdfs/Lec7_live.pdf" target = "_blank">pdf</a>.</p>




<div class="chunk" id="unnamed-chunk-11"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl com">#####################################################################</span>
<span class="hl com"># LECTURE 7: Giving better names to economic variables in SNB data  #</span>
<span class="hl com">#####################################################################</span>

<span class="hl com"># This is the first of a series of scripts for Lecture 7.</span>
<span class="hl com"># In this script, we &quot;dress up&quot; our SNB data and then save them</span>
<span class="hl com"># To the hard disk directly in RData and csv format. So we can use them</span>
<span class="hl com"># next time cirectly, without any dressing up.</span>

<span class="hl kwd">rm</span><span class="hl std">(</span><span class="hl kwc">list</span> <span class="hl std">=</span> <span class="hl kwd">ls</span><span class="hl std">())</span>

<span class="hl com"># Read the data as they come from the SNB website</span>
<span class="hl com">#################################################</span>

<span class="hl com"># REPLACE THE WORKING DIRECTORY BELOW WITH THE ONE FOR YOUR DEVICE</span>
<span class="hl kwd">setwd</span><span class="hl std">(</span><span class="hl str">&quot;D:/Dropbox/Mac&amp;Surf/Programmierkurs Dropb/Data&quot;</span><span class="hl std">)</span>



<span class="hl com"># Read files, adjust file names to your situation!</span>
<span class="hl std">rawXrates</span> <span class="hl kwb">=</span> <span class="hl kwd">read.csv</span><span class="hl std">(</span><span class="hl kwc">file</span> <span class="hl std">=</span>
   <span class="hl str">&quot;SNB Xrates downloaded clean noEmptyCol.csv&quot;</span><span class="hl std">)</span>

<span class="hl std">rawAussen</span> <span class="hl kwb">=</span> <span class="hl kwd">read.csv</span><span class="hl std">(</span><span class="hl kwc">file</span> <span class="hl std">=</span>
    <span class="hl str">&quot;SNB Aussenhandel downloaded clean noEmptyCol.csv&quot;</span><span class="hl std">)</span>

<span class="hl com"># If you are having troubles with the data, use the following two lines</span>

<span class="hl com"># load(&quot;rawXrates.RData&quot;)</span>
<span class="hl com"># load(&quot;rawExpImp.RData&quot;); rawAussen = rawExpImp; rm(rawExpImp)</span>

<span class="hl com"># You get these data in RData format from the online script on</span>
<span class="hl com"># https://binswanger.github.io/practicaldata_hs16/#Problems--What-if-some-numbers-are-automatically-converted-to-dates-</span>
<span class="hl com"># Put these files in your working directory</span>

<span class="hl com"># Give better name to the &quot;economic variables&quot;</span>
<span class="hl com">##############################################</span>

<span class="hl com"># First for rawAussen</span>

<span class="hl com"># Make a copy of rawAussen</span>
<span class="hl std">dataAussen</span> <span class="hl kwb">=</span> <span class="hl std">rawAussen</span>

<span class="hl com">#rename Do</span>
<span class="hl std">oldNamesA_D0</span> <span class="hl kwb">=</span> <span class="hl kwd">unique</span><span class="hl std">(</span><span class="hl kwd">as.character</span><span class="hl std">(dataAussen</span><span class="hl opt">$</span><span class="hl std">D0))</span>
  <span class="hl com"># use &quot;as.character&quot;, so we really know what we are doing, factors are tricky</span>
<span class="hl std">newNamesA_D0</span> <span class="hl kwb">=</span> <span class="hl kwd">c</span><span class="hl std">(</span><span class="hl str">&quot;Einfuhr&quot;</span><span class="hl std">,</span> <span class="hl str">&quot;Ausfuhr&quot;</span><span class="hl std">,</span> <span class="hl str">&quot;Handelsbilanzsaldo&quot;</span><span class="hl std">)</span>
<span class="hl com">#check</span>
<span class="hl kwd">cbind</span><span class="hl std">(oldNamesA_D0, newNamesA_D0)</span>
</pre></div>
<div class="output"><pre class="knitr r">##      oldNamesA_D0 newNamesA_D0        
## [1,] &quot;E&quot;          &quot;Einfuhr&quot;           
## [2,] &quot;A&quot;          &quot;Ausfuhr&quot;           
## [3,] &quot;H&quot;          &quot;Handelsbilanzsaldo&quot;
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com"># # For developing the function</span>
<span class="hl com"># df = dataAussen</span>
<span class="hl com"># colInDf = &quot;D0&quot;</span>
<span class="hl com"># oldNames = oldNamesA_D0</span>
<span class="hl com"># newNames = newNamesA_D0</span>

<span class="hl com"># A function for renaming, so we need to type this 3 times...</span>
<span class="hl std">rename</span> <span class="hl kwb">=</span> <span class="hl kwa">function</span><span class="hl std">(</span><span class="hl kwc">df</span><span class="hl std">,</span> <span class="hl kwc">colInDf</span><span class="hl std">,</span> <span class="hl kwc">oldNames</span><span class="hl std">,</span> <span class="hl kwc">newNames</span><span class="hl std">){</span>
  <span class="hl com"># In case that the column where we want to change names is a factor</span>
  <span class="hl com"># first convert the factor to character. Otherwise, it becomes a bit more tricky</span>
  <span class="hl kwa">if</span> <span class="hl std">(</span><span class="hl kwd">is.factor</span><span class="hl std">(df[[colInDf]])) {</span>
    <span class="hl std">df[[colInDf]]</span> <span class="hl kwb">=</span> <span class="hl kwd">as.character</span><span class="hl std">(df[[colInDf]])</span>
  <span class="hl std">}</span>

  <span class="hl com"># Now rename</span>
  <span class="hl kwa">for</span> <span class="hl std">(i</span> <span class="hl kwa">in</span> <span class="hl num">1</span><span class="hl opt">:</span><span class="hl kwd">length</span><span class="hl std">(oldNames)){</span>
    <span class="hl std">df[[colInDf]]   [df[[colInDf]]</span> <span class="hl opt">==</span> <span class="hl std">oldNames[i]]</span> <span class="hl kwb">=</span> <span class="hl std">newNames[i]</span>
    <span class="hl com">#dataAussen[[&quot;D0&quot;]]  [dataAussen[[&quot;D0&quot;]] == &quot;E&quot;]</span>
    <span class="hl com">#dataAussen$D0   [dataAussen$D0 == &quot;E&quot;]</span>
  <span class="hl std">}</span>
  <span class="hl kwd">return</span><span class="hl std">(df)</span>
<span class="hl std">}</span>

<span class="hl std">dataAussen</span> <span class="hl kwb">=</span> <span class="hl kwd">rename</span><span class="hl std">(dataAussen,</span> <span class="hl str">&quot;D0&quot;</span><span class="hl std">, oldNamesA_D0, newNamesA_D0)</span>

<span class="hl com"># rename D1</span>

<span class="hl std">oldNamesA_D1</span> <span class="hl kwb">=</span> <span class="hl kwd">unique</span><span class="hl std">(</span><span class="hl kwd">as.character</span><span class="hl std">(dataAussen</span><span class="hl opt">$</span><span class="hl std">D1))</span>
<span class="hl std">newNamesA_D1</span><span class="hl kwb">=</span> <span class="hl kwd">c</span><span class="hl std">(</span><span class="hl str">&quot;Total&quot;</span><span class="hl std">,</span> <span class="hl str">&quot;Maschinen, Apparate und Elektronik&quot;</span><span class="hl std">,</span>
              <span class="hl str">&quot;Praezisionsinstrumente, Uhren, Bijouterie&quot;</span><span class="hl std">,</span>
              <span class="hl str">&quot;Chemikalien&quot;</span><span class="hl std">,</span> <span class="hl str">&quot;Textilien, Bekleidung, Schuhe&quot;</span><span class="hl std">,</span>
              <span class="hl str">&quot;Fahrzeuge&quot;</span><span class="hl std">,</span> <span class="hl str">&quot;Metalle&quot;</span><span class="hl std">,</span> <span class="hl str">&quot;Uhren&quot;</span><span class="hl std">,</span> <span class="hl str">&quot;Praezisionsinstrumente&quot;</span><span class="hl std">,</span>
              <span class="hl str">&quot;Praezisionsinstrumente, Uhren, Bijouterie&quot;</span><span class="hl std">)</span>

<span class="hl com"># Check            </span>
<span class="hl kwd">cbind</span><span class="hl std">(oldNamesA_D1, newNamesA_D1)</span>
</pre></div>
<div class="output"><pre class="knitr r">##       oldNamesA_D1 newNamesA_D1                               
##  [1,] &quot;T&quot;          &quot;Total&quot;                                    
##  [2,] &quot;MAE&quot;        &quot;Maschinen, Apparate und Elektronik&quot;       
##  [3,] &quot;PUB&quot;        &quot;Praezisionsinstrumente, Uhren, Bijouterie&quot;
##  [4,] &quot;C&quot;          &quot;Chemikalien&quot;                              
##  [5,] &quot;TBS0&quot;       &quot;Textilien, Bekleidung, Schuhe&quot;            
##  [6,] &quot;F&quot;          &quot;Fahrzeuge&quot;                                
##  [7,] &quot;M&quot;          &quot;Metalle&quot;                                  
##  [8,] &quot;U&quot;          &quot;Uhren&quot;                                    
##  [9,] &quot;P&quot;          &quot;Praezisionsinstrumente&quot;                   
## [10,] &quot;TBS1&quot;       &quot;Praezisionsinstrumente, Uhren, Bijouterie&quot;
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl std">dataAussen</span> <span class="hl kwb">=</span> <span class="hl kwd">rename</span><span class="hl std">(dataAussen,</span> <span class="hl str">&quot;D1&quot;</span><span class="hl std">, oldNamesA_D1, newNamesA_D1)</span>

<span class="hl std">oldNamesA_D2</span> <span class="hl kwb">=</span> <span class="hl kwd">unique</span><span class="hl std">(</span><span class="hl kwd">as.character</span><span class="hl std">(dataAussen</span><span class="hl opt">$</span><span class="hl std">D2))</span>
<span class="hl std">newNamesA_D2</span><span class="hl kwb">=</span> <span class="hl kwd">c</span><span class="hl std">(</span><span class="hl str">&quot;Wert in Millionen Franken&quot;</span><span class="hl std">,</span>
              <span class="hl str">&quot;Veraenderung gegenueber dem Vorjahr in \u0025 - nominal&quot;</span><span class="hl std">,</span>
              <span class="hl str">&quot;Veraenderung gegenueber dem Vorjahr in \u0025 - real&quot;</span><span class="hl std">)</span>

<span class="hl com"># &quot;u0025&quot; is UTF-8 coding</span>

<span class="hl com"># Check            </span>
<span class="hl kwd">cbind</span><span class="hl std">(oldNamesA_D2, newNamesA_D2)</span>
</pre></div>
<div class="output"><pre class="knitr r">##      oldNamesA_D2 newNamesA_D2                                        
## [1,] &quot;WMF&quot;        &quot;Wert in Millionen Franken&quot;                         
## [2,] &quot;N&quot;          &quot;Veraenderung gegenueber dem Vorjahr in % - nominal&quot;
## [3,] &quot;R&quot;          &quot;Veraenderung gegenueber dem Vorjahr in % - real&quot;
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl std">dataAussen</span> <span class="hl kwb">=</span> <span class="hl kwd">rename</span><span class="hl std">(dataAussen,</span> <span class="hl str">&quot;D2&quot;</span><span class="hl std">, oldNamesA_D2, newNamesA_D2)</span>

<span class="hl com"># Now the exchange rates</span>

<span class="hl com"># Copy the data to new data frame</span>
<span class="hl com"># get rid of end-of-month values of exchange rates</span>
<span class="hl std">dataXrates</span> <span class="hl kwb">=</span> <span class="hl std">rawXrates[rawXrates</span><span class="hl opt">$</span><span class="hl std">D0</span> <span class="hl opt">==</span> <span class="hl str">&quot;M0&quot;</span><span class="hl std">, ]</span>

<span class="hl std">oldNamesX_D1</span> <span class="hl kwb">=</span> <span class="hl kwd">unique</span><span class="hl std">(</span><span class="hl kwd">as.character</span><span class="hl std">(dataXrates</span><span class="hl opt">$</span><span class="hl std">D1))</span>

<span class="hl std">newNamesX_D1</span> <span class="hl kwb">=</span> <span class="hl kwd">c</span><span class="hl std">(</span>
    <span class="hl str">&quot;CHF/Euro&quot;</span><span class="hl std">,</span>
    <span class="hl str">&quot;CHF/Britisches Pfund&quot;</span><span class="hl std">,</span>
    <span class="hl str">&quot;CHF/100 Daenische Kronen&quot;</span><span class="hl std">,</span>
    <span class="hl str">&quot;CHF/100 Norwegische Kronen&quot;</span><span class="hl std">,</span>
    <span class="hl str">&quot;CHF/100 Tschechische Kronen&quot;</span><span class="hl std">,</span>
    <span class="hl str">&quot;CHF/100 Ungarische Forint&quot;</span><span class="hl std">,</span>
    <span class="hl str">&quot;CHF/100 Polnische Zloty&quot;</span><span class="hl std">,</span>
    <span class="hl str">&quot;CHF/100 Rubel&quot;</span><span class="hl std">,</span>
    <span class="hl str">&quot;CHF/100 Schwedische Kronen&quot;</span><span class="hl std">,</span>
    <span class="hl str">&quot;CHF/100 Tuerkische Lira&quot;</span><span class="hl std">,</span>
    <span class="hl str">&quot;CHF/US Dollar&quot;</span><span class="hl std">,</span>
    <span class="hl str">&quot;CHF/Kanadische Dollar&quot;</span><span class="hl std">,</span>
    <span class="hl str">&quot;CHF/100 Argentinische Pesos&quot;</span><span class="hl std">,</span>
    <span class="hl str">&quot;CHF/100 Brasilianische Real&quot;</span><span class="hl std">,</span>
    <span class="hl str">&quot;CHF/100 Mexikanische Pesos&quot;</span><span class="hl std">,</span>
    <span class="hl str">&quot;CHF/Suedafrikanischer Rand&quot;</span><span class="hl std">,</span>
    <span class="hl str">&quot;CHF/100 Japanische Yen&quot;</span><span class="hl std">,</span>
    <span class="hl str">&quot;CHF/Australischer Dollar&quot;</span><span class="hl std">,</span>
    <span class="hl str">&quot;CHF/100 Chinesische Yuan&quot;</span><span class="hl std">,</span>
    <span class="hl str">&quot;CHF/100 Hongkong Dollars&quot;</span><span class="hl std">,</span>
    <span class="hl str">&quot;CHF/100 Koreanische Won&quot;</span><span class="hl std">,</span>
    <span class="hl str">&quot;CHF/100 Malaysische Ringgit&quot;</span><span class="hl std">,</span>
    <span class="hl str">&quot;CHF/NeuseelÃ¤ndischer Dollar&quot;</span><span class="hl std">,</span>
    <span class="hl str">&quot;CHF/100 Singapur-Dollars&quot;</span><span class="hl std">,</span>
    <span class="hl str">&quot;CHF/100 Thailaendische Baht&quot;</span><span class="hl std">,</span>
    <span class="hl str">&quot;CHF/Sonderziehungsrecht&quot;</span><span class="hl std">)</span>


<span class="hl com"># Check            </span>
<span class="hl kwd">cbind</span><span class="hl std">(oldNamesX_D1, newNamesX_D1)</span>
</pre></div>
<div class="output"><pre class="knitr r">##       oldNamesX_D1 newNamesX_D1                 
##  [1,] &quot;EUR1&quot;       &quot;CHF/Euro&quot;                   
##  [2,] &quot;GBP1&quot;       &quot;CHF/Britisches Pfund&quot;       
##  [3,] &quot;DKK100&quot;     &quot;CHF/100 Daenische Kronen&quot;   
##  [4,] &quot;NOK100&quot;     &quot;CHF/100 Norwegische Kronen&quot; 
##  [5,] &quot;CZK100&quot;     &quot;CHF/100 Tschechische Kronen&quot;
##  [6,] &quot;HUF100&quot;     &quot;CHF/100 Ungarische Forint&quot;  
##  [7,] &quot;PLN100&quot;     &quot;CHF/100 Polnische Zloty&quot;    
##  [8,] &quot;RUB100&quot;     &quot;CHF/100 Rubel&quot;              
##  [9,] &quot;SEK100&quot;     &quot;CHF/100 Schwedische Kronen&quot; 
## [10,] &quot;TRY100&quot;     &quot;CHF/100 Tuerkische Lira&quot;    
## [11,] &quot;USD1&quot;       &quot;CHF/US Dollar&quot;              
## [12,] &quot;CAD1&quot;       &quot;CHF/Kanadische Dollar&quot;      
## [13,] &quot;ARS100&quot;     &quot;CHF/100 Argentinische Pesos&quot;
## [14,] &quot;BRL100&quot;     &quot;CHF/100 Brasilianische Real&quot;
## [15,] &quot;MXN100&quot;     &quot;CHF/100 Mexikanische Pesos&quot; 
## [16,] &quot;ZAR1&quot;       &quot;CHF/Suedafrikanischer Rand&quot; 
## [17,] &quot;JPY100&quot;     &quot;CHF/100 Japanische Yen&quot;     
## [18,] &quot;AUD1&quot;       &quot;CHF/Australischer Dollar&quot;   
## [19,] &quot;CNY100&quot;     &quot;CHF/100 Chinesische Yuan&quot;   
## [20,] &quot;HKD100&quot;     &quot;CHF/100 Hongkong Dollars&quot;   
## [21,] &quot;KRW100&quot;     &quot;CHF/100 Koreanische Won&quot;    
## [22,] &quot;MYR100&quot;     &quot;CHF/100 Malaysische Ringgit&quot;
## [23,] &quot;NZD1&quot;       &quot;CHF/NeuseelÃ¤ndischer Dollar&quot;
## [24,] &quot;SGD100&quot;     &quot;CHF/100 Singapur-Dollars&quot;   
## [25,] &quot;THB100&quot;     &quot;CHF/100 Thailaendische Baht&quot;
## [26,] &quot;XDR1&quot;       &quot;CHF/Sonderziehungsrecht&quot;
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl std">dataXrates</span> <span class="hl kwb">=</span> <span class="hl kwd">rename</span><span class="hl std">(dataXrates,</span> <span class="hl str">&quot;D1&quot;</span><span class="hl std">, oldNamesX_D1, newNamesX_D1)</span>

<span class="hl com"># Create unique timeIDs</span>
<span class="hl com">#######################</span>

<span class="hl kwd">library</span><span class="hl std">(stringr)</span>

<span class="hl std">calcTimeID</span> <span class="hl kwb">=</span> <span class="hl kwa">function</span><span class="hl std">(</span><span class="hl kwc">df</span><span class="hl std">){</span>

  <span class="hl std">df</span><span class="hl opt">$</span><span class="hl std">year</span> <span class="hl kwb">=</span> <span class="hl kwd">as.numeric</span><span class="hl std">(</span>
    <span class="hl kwd">substr</span><span class="hl std">(df</span><span class="hl opt">$</span><span class="hl std">Date,</span> <span class="hl kwc">start</span> <span class="hl std">=</span> <span class="hl num">1</span><span class="hl std">,</span> <span class="hl kwc">stop</span> <span class="hl std">=</span> <span class="hl num">4</span><span class="hl std">)  )</span>

  <span class="hl std">df</span><span class="hl opt">$</span><span class="hl std">month</span> <span class="hl kwb">=</span> <span class="hl kwd">as.numeric</span><span class="hl std">(</span>
    <span class="hl kwd">substr</span><span class="hl std">(df</span><span class="hl opt">$</span><span class="hl std">Date,</span> <span class="hl kwc">start</span> <span class="hl std">=</span> <span class="hl num">6</span><span class="hl std">,</span> <span class="hl kwc">stop</span> <span class="hl std">=</span> <span class="hl num">7</span><span class="hl std">)  )</span>

  <span class="hl std">df</span><span class="hl opt">$</span><span class="hl std">timeID</span> <span class="hl kwb">=</span> <span class="hl std">df</span><span class="hl opt">$</span><span class="hl std">year</span> <span class="hl opt">+</span>
    <span class="hl std">(df</span><span class="hl opt">$</span><span class="hl std">month</span><span class="hl opt">-</span><span class="hl num">1</span><span class="hl std">)</span><span class="hl opt">/</span><span class="hl num">12</span>

  <span class="hl std">df</span><span class="hl opt">$</span><span class="hl std">year</span> <span class="hl kwb">=</span> <span class="hl kwa">NULL</span>
  <span class="hl std">df</span><span class="hl opt">$</span><span class="hl std">month</span> <span class="hl kwb">=</span> <span class="hl kwa">NULL</span>

  <span class="hl kwd">return</span><span class="hl std">(df)</span>
<span class="hl std">}</span>

<span class="hl std">dataAussen</span> <span class="hl kwb">=</span> <span class="hl kwd">calcTimeID</span><span class="hl std">(dataAussen)</span>
<span class="hl std">dataXrates</span> <span class="hl kwb">=</span> <span class="hl kwd">calcTimeID</span><span class="hl std">(dataXrates)</span>


<span class="hl com"># Save data in RData format</span>
<span class="hl kwd">save</span><span class="hl std">(dataAussen, dataXrates,</span>
     <span class="hl kwc">file</span> <span class="hl std">=</span> <span class="hl str">&quot;dataforAnalysis.RData&quot;</span><span class="hl std">)</span>


<span class="hl com"># Write data to csv (just for fun)</span>

<span class="hl kwd">write.table</span><span class="hl std">(dataAussen,</span> <span class="hl kwc">file</span> <span class="hl std">=</span> <span class="hl str">&quot;dataAussen.csv&quot;</span><span class="hl std">,</span>
            <span class="hl kwc">sep</span> <span class="hl std">=</span> <span class="hl str">&quot;,&quot;</span><span class="hl std">,</span> <span class="hl kwc">qmethod</span> <span class="hl std">=</span> <span class="hl str">&quot;escape&quot;</span><span class="hl std">,</span> <span class="hl kwc">na</span> <span class="hl std">=</span> <span class="hl str">&quot;&quot;</span><span class="hl std">,</span>
            <span class="hl kwc">row.names</span> <span class="hl std">=</span> <span class="hl num">FALSE</span><span class="hl std">)</span>

<span class="hl kwd">write.table</span><span class="hl std">(dataXrates,</span> <span class="hl kwc">file</span> <span class="hl std">=</span> <span class="hl str">&quot;dataXrates.csv&quot;</span><span class="hl std">,</span>
            <span class="hl kwc">sep</span> <span class="hl std">=</span> <span class="hl str">&quot;,&quot;</span><span class="hl std">,</span> <span class="hl kwc">qmethod</span> <span class="hl std">=</span> <span class="hl str">&quot;escape&quot;</span><span class="hl std">,</span> <span class="hl kwc">na</span> <span class="hl std">=</span> <span class="hl str">&quot;&quot;</span><span class="hl std">,</span>
            <span class="hl kwc">row.names</span> <span class="hl std">=</span> <span class="hl num">FALSE</span><span class="hl std">)</span>
</pre></div>
</div></div>








</div> <!-- end of div scriptText -->


<div class='markEnd'> </div> <!-- A last horizontal ruler at the end of the document-->

</div> <!-- end of content div -->

</body>
</html>
